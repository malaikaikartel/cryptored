(window.webpackJsonp=window.webpackJsonp||[]).push([["main~f9ca8911"],{1009:function(t,e,n){"use strict";var a=n(1010);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,i){if(i!==a){i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function e(){return t}var n={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n}},1010:function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1086:function(t,ar,sr){"use strict";sr.r(ar),function(i){var _,t=sr(146),q=sr.n(t),n=sr(939),t=sr(467),d=sr.n(t),t=sr(597),r=sr.n(t),t=sr(232),c=sr.n(t),t=sr(24),e=sr.n(t),t=sr(70),s=sr.n(t);function o(t){return"$"+t}function a(){this._store={}}function u(t){if(this._store=new a,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}a.prototype.get=function(t){t=o(t);return this._store[t]},a.prototype.set=function(t,e){t=o(t);return this._store[t]=e,!0},a.prototype.has=function(t){return o(t)in this._store},a.prototype.delete=function(t){var e=o(t),t=e in this._store;return delete this._store[e],t},a.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var o=e[n];t(this._store[o],o=o.substring(1))}},Object.defineProperty(a.prototype,"size",{get:function(){return Object.keys(this._store).length}}),u.prototype.add=function(t){return this._store.set(t,!0)},u.prototype.has=function(t){return this._store.has(t)},u.prototype.forEach=function(n){this._store.forEach(function(t,e){n(e)})},Object.defineProperty(u.prototype,"size",{get:function(){return this._store.size}});var l,S=function(){if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set){var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}}()?(_=Set,Map):(_=u,a),f=Function.prototype.toString,h=f.call(Object);function M(e){var t,n,r,o;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=M(e[n]);return t}if(e instanceof Date)return e.toISOString();if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob)return function(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),t=new Uint8Array(t);return n.set(t),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}(e);if(!function(){var t=Object.getPrototypeOf(e);if(null===t)return 1;t=t.constructor;return"function"==typeof t&&t instanceof t&&f.call(t)==h}())return e;for(n in t={},e)!Object.prototype.hasOwnProperty.call(e,n)||void 0!==(o=M(e[n]))&&(t[n]=o);return t}function p(e){var n=!1;return c()(function(t){if(n)throw new Error("once called more than once");n=!0,e.apply(this,t)})}function g(a){return c()(function(o){o=M(o);var i=this,e="function"==typeof o[o.length-1]&&o.pop(),t=new Promise(function(n,r){var t;try{var e=p(function(t,e){t?r(t):n(e)});o.push(e),(t=a.apply(i,o))&&"function"==typeof t.then&&n(t)}catch(t){r(t)}});return e&&t.then(function(t){e(null,t)},e),t})}function w(i,t){return g(c()(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var o=this;return function(r,o,t){if(r.constructor.listeners("debug").length){for(var e=["api",r.name,o],n=0;n<t.length-1;n++)e.push(t[n]);r.constructor.emit("debug",e);var i=t[t.length-1];t[t.length-1]=function(t,e){var n=(n=["api",r.name,o]).concat(t?["error",t]:["success",e]);r.constructor.emit("debug",n),i(t,e)}}}(o,i,r),this.taskqueue.isReady?t.apply(this,r):new Promise(function(e,n){o.taskqueue.addTask(function(t){t?n(t):e(o[i].apply(o,r))})})}))}function b(t,e){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];i in t&&(n[i]=t[i])}return n}function v(t){return t}function m(t){return[{ok:t}]}function k(s,u,c){var t=u.docs,l=new S;t.forEach(function(t){l.has(t.id)?l.get(t.id).push(t):l.set(t.id,[t])});var f=l.size,d=0,h=new Array(f),r=[];l.forEach(function(t,e){r.push(e)});var e=0;!function a(){var t,n;e>=r.length||(t=Math.min(e+6,r.length),t=r.slice(e,t),n=e,t.forEach(function(r,t){var o=n+t,t=l.get(r),e=b(t[0],["atts_since","attachments"]);e.open_revs=t.map(function(t){return t.rev}),e.open_revs=e.open_revs.filter(v);var i=v;0===e.open_revs.length&&(delete e.open_revs,i=m),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in u&&(e[t]=u[t])}),s.get(r,e,function(t,e){var n,e=t?[{error:t}]:i(e);h[o]={id:r,docs:e},++d===f&&(n=[],h.forEach(function(e){e.docs.forEach(function(t){n.push({id:e.id,docs:[t]})})}),c(null,{results:n})),a()})}),e+=t.length)}()}try{localStorage.setItem("_pouch_check_localstorage",1),l=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){l=!1}function y(){var e;s.a.call(this),this._listeners={},e=this,l&&addEventListener("storage",function(t){e.emit(t.key)})}function E(t){"undefined"!=typeof console&&"function"==typeof console[t]&&Array.prototype.slice.call(arguments,1)}function N(t){var t=(e=t)?0:2e3,e=parseInt(e,10)||0;return(t=parseInt(t,10))!=t||t<=e?t=(e||1)<<1:t+=1,6e5<t&&(e=3e5,t=6e5),~~((t-e)*Math.random()+e)}function A(t,e){E("info","The above "+t+" is totally normal. "+e)}e()(y,s.a),y.prototype.addListener=function(t,e,n,r){var o,i;function a(){var t;o._listeners[e]&&(i?i="waiting":(i=!0,t=b(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]),n.changes(t).on("change",function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))}).on("complete",function(){"waiting"===i&&q()(a),i=!1}).on("error",function(){i=!1})))}this._listeners[e]||(i=!1,(o=this)._listeners[e]=a,this.on(t,a))},y.prototype.removeListener=function(t,e){e in this._listeners&&(s.a.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},y.prototype.notifyLocalWindows=function(t){l&&(localStorage[t]="a"===localStorage[t]?"b":"a")},y.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var C="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};function P(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}e()(P,Error),P.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new P(401,"unauthorized","Name or password is incorrect.");var O=new P(400,"bad_request","Missing JSON list of 'docs'"),B=new P(404,"not_found","missing"),x=new P(409,"conflict","Document update conflict"),j=new P(400,"bad_request","_id field must contain a string"),T=new P(412,"missing_id","_id is required for puts"),L=new P(400,"bad_request","Only reserved document ids may start with underscore."),I=(new P(412,"precondition_failed","Database not open"),new P(500,"unknown_error","Database encountered an unknown error")),D=new P(500,"badarg","Some query argument is invalid"),R=(new P(400,"invalid_request","Request was invalid"),new P(400,"query_parse_error","Some query parameter is invalid")),$=new P(500,"doc_validation","Bad special document member"),U=new P(400,"bad_request","Something wrong with the request"),K=new P(400,"bad_request","Document must be a JSON object"),z=(new P(404,"not_found","Database not found"),new P(500,"indexed_db_went_bad","unknown")),F=(new P(500,"web_sql_went_bad","unknown"),new P(500,"levelDB_went_went_bad","unknown"),new P(403,"forbidden","Forbidden by design doc validate_doc_update function"),new P(400,"bad_request","Invalid rev format")),H=(new P(412,"file_exists","The database could not be created, the file already exists."),new P(412,"missing_stub","A pre-existing attachment stub wasn't found"));function J(o,t){function e(t){for(var e=Object.getOwnPropertyNames(o),n=0,r=e.length;n<r;n++)"function"!=typeof o[e[n]]&&(this[e[n]]=o[e[n]]);void 0!==t&&(this.reason=t)}return e.prototype=P.prototype,new e(t)}function Y(t){var e;return"object"!=typeof t&&(e=t,(t=I).data=e),"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function V(r){var o={},i=r.filter&&"function"==typeof r.filter;return o.query=r.query_params,function(t){t.doc||(t.doc={});var e=i&&function(t,e,n){try{return!t(e,n)}catch(t){n="Filter function threw: "+t.toString();return J(U,n)}}(r.filter,t.doc,o);if("object"==typeof e)return e;if(e)return!1;if(r.include_docs){if(!r.attachments)for(var n in t.doc._attachments)t.doc._attachments.hasOwnProperty(n)&&(t.doc._attachments[n].stub=!0)}else delete t.doc;return!0}}function G(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function Q(t){var e;if(t?"string"!=typeof t?e=J(j):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=J(L)):e=J(T),e)throw e}function X(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(E("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function W(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function Z(t){t=W(t);return t?t.join("/"):null}new P(413,"invalid_url","Provided URL is invalid");var tt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],et="queryKey",nt=/(?:^|&)([^&=]*)=?([^&]*)/g,rt=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function ot(t){for(var e=rt.exec(t),r={},n=14;n--;){var o=tt[n],i=e[n]||"",a=-1!==["user","password"].indexOf(o);r[o]=a?decodeURIComponent(i):i}return r[et]={},r[tt[12]].replace(nt,function(t,e,n){e&&(r[et][e]=n)}),r}function it(t,e){var n,r=[],o=[];for(n in e)e.hasOwnProperty(n)&&(r.push(n),o.push(e[n]));return r.push(t),Function.apply(null,r).apply(null,o)}function at(s,u,c){return new Promise(function(i,a){s.get(u,function(t,e){if(t){if(404!==t.status)return a(t);e={}}var n,r,o,t=e._rev,e=c(e);if(!e)return i({updated:!1,rev:t});e._id=u,e._rev=t,i((o=c,(n=s).put(r=e).then(function(t){return{updated:!0,rev:t.rev}},function(t){if(409!==t.status)throw t;return at(n,r._id,o)})))})})}function st(t){return atob(t)}var ut=function(t){return btoa(t)};function ct(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if("TypeError"!==t.name)throw t;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(n.type)}}function lt(t,e){return ct([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}(t)],{type:e})}function ft(t,e){return lt(st(t),e)}function dt(t,e){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var o=t.target.result||"";if(r)return e(o);e(function(){for(var t="",e=new Uint8Array(o),n=e.byteLength,r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t}())},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function ht(t,e){dt(t,function(t){e(t)})}function pt(t,e){ht(t,function(t){e(ut(t))})}var gt=self.setImmediate||self.setTimeout;function vt(e,t,n,r,o){var i,a;(0<n||r<t.size)&&(n=n,i=r,t=(r=t).webkitSlice?r.webkitSlice(n,i):r.slice(n,i)),i=t,a=function(t){e.append(t),o()},(t=new FileReader).onloadend=function(t){t=t.target.result||new ArrayBuffer(0);a(t)},t.readAsArrayBuffer(i)}function mt(t,e,n,r,o){(0<n||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),o()}function yt(e,n){var t="string"==typeof e,r=t?e.length:e.size,o=Math.min(32768,r),i=Math.ceil(r/o),a=0,s=new(t?d.a:d.a.ArrayBuffer),u=t?mt:vt;function c(){gt(f)}function l(){var t=s.end(!0),t=ut(t);n(t),s.destroy()}function f(){var t=a*o;u(s,e,t,t+o,++a<i?c:l)}f()}function _t(t){return d.a.hash(t)}function wt(t,e){t=M(t);return e?(delete t._rev_tree,_t(JSON.stringify(t))):Object(n.a)().replace(/-/g,"").toLowerCase()}var bt=n.a;function kt(t){for(var e,n,r,o=t.rev_tree.slice();l=o.pop();){var i=l.ids,a=i[2],s=l.pos;if(a.length)for(var u=0,c=a.length;u<c;u++)o.push({pos:s+1,ids:a[u]});else{var l=!!i[1].deleted,i=i[0];e&&!(r!==l?r:n!==s?n<s:e<i)||(e=i,n=s,r=l)}}return n+"-"+e}function Et(t,e){for(var n,r=t.slice();n=r.pop();)for(var o=n.pos,i=n.ids,a=i[2],s=e(0===a.length,o,i[0],n.ctx,i[1]),u=0,c=a.length;u<c;u++)r.push({pos:o+1,ids:a[u],ctx:s})}function At(t,e){return t.pos-e.pos}function Ct(t){var i=[];Et(t,function(t,e,n,r,o){t&&i.push({rev:e+"-"+n,pos:e,opts:o})}),i.sort(At).reverse();for(var e=0,n=i.length;e<n;e++)delete i[e].pos;return i}function Pt(t){for(var e=kt(t),n=Ct(t.rev_tree),r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.rev===e||a.opts.deleted||r.push(a.rev)}return r}function Ot(t){for(var e,n=[],r=t.slice();e=r.pop();){var o=e.pos,i=e.ids,a=i[0],s=i[1],u=i[2],i=0===u.length,c=e.history?e.history.slice():[];c.push({id:a,opts:s}),i&&n.push({pos:o+1-c.length,ids:c});for(var l=0,f=u.length;l<f;l++)r.push({pos:o+1,ids:u[l],history:c})}return n.reverse()}function St(t,e){return t.pos-e.pos}function Bt(t,e){for(var n,r,o=e,i=t.length;o<i;o++){var a=t[o],a=[a.id,a.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function xt(t,e){return t[0]<e[0]?-1:1}function jt(t,e){for(var n,r,o,i=[{tree1:t,tree2:e}],a=!1;0<i.length;){var s=i.pop(),u=s.tree1,c=s.tree2;(u[1].status||c[1].status)&&(u[1].status="available"===u[1].status||"available"===c[1].status?"available":"missing");for(var l=0;l<c[2].length;l++)if(u[2][0]){for(var f=!1,d=0;d<u[2].length;d++)u[2][d][0]===c[2][l][0]&&(i.push({tree1:u[2][d],tree2:c[2][l]}),f=!0);f||(a="new_branch",o=function(t,e,n){for(var r,o=0,i=t.length;o<i;)n(t[r=o+i>>>1],e)<0?o=1+r:i=r;return o}(n=u[2],r=c[2][l],xt),n.splice(o,0,r))}else a="new_leaf",u[2][0]=c[2][l]}return{conflicts:a,tree:t}}function Tt(t,e,n){var r,o=[],i=!1,a=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var s=0,u=t.length;s<u;s++){var c=t[s];if(c.pos===e.pos&&c.ids[0]===e.ids[0])r=jt(c.ids,e.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(!0!==n){var l=c.pos<e.pos?c:e,f=c.pos<e.pos?e:c,d=f.pos-l.pos,h=[],p=[];for(p.push({ids:l.ids,diff:d,parent:null,parentIdx:null});0<p.length;){var g=p.pop();if(0!==g.diff)for(var v=g.ids[2],m=0,y=v.length;m<y;m++)p.push({ids:v[m],diff:g.diff-1,parent:g.ids,parentIdx:m});else g.ids[0]===f.ids[0]&&h.push(g)}d=h[0];d?(r=jt(d.ids,f.ids),d.parent[2][d.parentIdx]=r.tree,o.push({pos:l.pos,ids:l.ids}),i=i||r.conflicts,a=!0):o.push(c)}else o.push(c)}return a||o.push(e),o.sort(St),{tree:o,conflicts:i||"internal_node"}}function Lt(t,e,n){e=Tt(t,e),n=function(t,e){for(var n,r=Ot(t),o=0,i=r.length;o<i;o++){var a=r[o],s=a.ids;if(s.length>e)for(var u=u||{},c=s.length-e,l={pos:a.pos+c,ids:Bt(s,c)},f=0;f<c;f++){var d=a.pos+f+"-"+s[f].id;u[d]=!0}else l={pos:a.pos,ids:Bt(s,0)};n=n?Tt(n,l,!0).tree:[l]}return u&&Et(n,function(t,e,n){delete u[e+"-"+n]}),{tree:n,revs:u?Object.keys(u):[]}}(e.tree,n);return{tree:n.tree,stemmedRevs:n.revs,conflicts:e.conflicts}}function It(t){return t.ids}function Dt(t,e){for(var n,r=(e=e||kt(t)).substring(e.indexOf("-")+1),o=t.rev_tree.map(It);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}}function qt(t){return/^_local/.test(t)}function Mt(r,e,n){s.a.call(this);var o=this;this.db=r;var i=(e=e?M(e):{}).complete=p(function(t,e){var n;t?0<("listenerCount"in(n=o)?n.listenerCount("error"):s.a.listenerCount(n,"error"))&&o.emit("error",t):o.emit("complete",e),o.removeAllListeners(),r.removeListener("destroyed",a)});function a(){o.cancel()}n&&(o.on("complete",function(t){n(null,t)}),o.on("error",n)),r.once("destroyed",a),e.onChange=function(t,e,n){o.isCancelled||function(t,e,n,r){try{t.emit("change",e,n,r)}catch(t){E("error",'Error in .on("change", function):',t)}}(o,t,e,n)};var t=new Promise(function(n,r){e.complete=function(t,e){t?r(t):n(e)}});o.once("cancel",function(){r.removeListener("destroyed",a),e.complete(null,{status:"cancelled"})}),this.then=t.then.bind(t),this.catch=t.catch.bind(t),this.then(function(t){i(null,t)},i),r.taskqueue.isReady?o.validateChanges(e):r.taskqueue.addTask(function(t){t?e.complete(t):o.isCancelled?o.emit("cancel"):o.validateChanges(e)})}function Nt(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=Ct(e.rev_tree).map(function(t){return{rev:t.rev}}));r={id:e.id,changes:r,doc:t};return Dt(e,t._rev)&&(r.deleted=!0),n.conflicts&&(r.doc._conflicts=Pt(e),r.doc._conflicts.length||delete r.doc._conflicts),r}function Rt(t,e){return t<e?-1:e<t?1:0}function $t(n,r){return function(t,e){t||e[0]&&e[0].error?((t=t||e[0]).docId=r,n(t)):n(null,e.length?e[0]:e)}}function Ut(t,e){var n=Rt(t._id,e._id);return 0!==n?n:Rt(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function Kt(){for(var t in s.a.call(this),Kt.prototype)"function"==typeof this[t]&&(this[t]=this[t].bind(this))}function zt(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ft(t,e){if(!(this instanceof Ft))return new Ft(t,e);var o=this;if(e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),void 0===e.deterministic_revs&&(e.deterministic_revs=!0),this.__opts=e=M(e),o.auto_compaction=e.auto_compaction,o.prefix=Ft.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var n=function(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Ft.adapters,o=Ft.preferredAdapters,i=Ft.prefix,a=e.adapter;if(!a)for(var s=0;s<o.length&&"idb"===(a=o[s])&&"websql"in r&&l&&localStorage["_pouch__websqldb_"+i+t];++s)E("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');e=r[a];return{name:e&&"use_prefix"in e&&!e.use_prefix?t:i+t,adapter:a}}((e.prefix||"")+t,e);if(e.name=n.name,e.adapter=e.adapter||n.adapter,o.name=t,o._adapter=e.adapter,Ft.emit("debug",["adapter","Picked adapter: ",e.adapter]),!Ft.adapters[e.adapter]||!Ft.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);Kt.call(o),o.taskqueue=new zt,o.adapter=e.adapter,Ft.adapters[e.adapter].call(o,e,function(t){return t?o.taskqueue.fail(t):((r=o).once("destroyed",e),r.once("closed",n),r.constructor.emit("ref",r),o.emit("created",o),Ft.emit("created",o.name),void o.taskqueue.ready(o));function e(t){r.removeListener("closed",n),t||r.constructor.emit("destroyed",r.name)}function n(){r.removeListener("destroyed",e),r.constructor.emit("unref",r)}var r})}e()(Mt,s.a),Mt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Mt.prototype.validateChanges=function(e){var n=e.complete,r=this;Ft._changesFilterPlugin?Ft._changesFilterPlugin.validate(e,function(t){return t?n(t):void r.doChanges(e)}):r.doChanges(e)},Mt.prototype.doChanges=function(e){var n=this,r=e.complete;if("live"in(e=M(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Nt,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(Ft._changesFilterPlugin){if(Ft._changesFilterPlugin.normalize(e),Ft._changesFilterPlugin.shouldFilter(this,e))return Ft._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(t){t in e&&E("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var o,i=this.db._changes(e);i&&"function"==typeof i.cancel&&(o=n.cancel,n.cancel=c()(function(t){i.cancel(),o.apply(this,t)}))}else this.db.info().then(function(t){n.isCancelled?r(null,{status:"cancelled"}):(e.since=t.update_seq,n.doChanges(e))},r)},e()(Kt,s.a),Kt.prototype.post=w("post",function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t)?n(J(K)):void this.bulkDocs({docs:[t]},e,$t(n,t._id))}),Kt.prototype.put=w("put",function(n,e,r){if("function"==typeof e&&(r=e,e={}),"object"!=typeof n||Array.isArray(n))return r(J(K));if(Q(n._id),qt(n._id)&&"function"==typeof this._putLocal)return n._deleted?this._removeLocal(n,r):this._putLocal(n,r);var t,o,i,a=this;function s(t){"function"==typeof a._put&&!1!==e.new_edits?a._put(n,e,t):a.bulkDocs({docs:[n]},e,$t(t,n._id))}e.force&&n._rev?(t=(i=n._rev.split("-"))[1],o=parseInt(i[0],10)+1,i=wt(),n._revisions={start:o,ids:[i,t]},n._rev=o+"-"+i,e.new_edits=!1,s(function(t){var e=t?null:{ok:!0,id:n._id,rev:n._rev};r(t,e)})):s(r)}),Kt.prototype.putAttachment=w("putAttachment",function(e,n,r,o,i){var a=this;function s(t){var e="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[n]={content_type:i,data:o,revpos:++e},a.put(t)}return"function"==typeof i&&(i=o,o=r,r=null),void 0===i&&(i=o,o=r,r=null),i||E("warn","Attachment",n,"on document",e,"is missing content_type"),a.get(e).then(function(t){if(t._rev!==r)throw J(x);return s(t)},function(t){if(t.reason===B.message)return s({_id:e});throw t})}),Kt.prototype.removeAttachment=w("removeAttachment",function(t,n,r,o){var i=this;i.get(t,function(t,e){if(t)o(t);else if(e._rev===r){if(!e._attachments)return o();delete e._attachments[n],0===Object.keys(e._attachments).length&&delete e._attachments,i.put(e,o)}else o(J(x))})}),Kt.prototype.remove=w("remove",function(t,e,n,r){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(o=t,n="function"==typeof e?(r=e,{}):(r=n,e)),(n=n||{}).was_delete=!0;e={_id:o._id,_rev:o._rev||n.rev,_deleted:!0};if(qt(e._id)&&"function"==typeof this._removeLocal)return this._removeLocal(o,r);this.bulkDocs({docs:[e]},n,$t(r,e._id))}),Kt.prototype.revsDiff=w("revsDiff",function(o,t,s){"function"==typeof t&&(s=t,t={});var u=Object.keys(o);if(!u.length)return s(null,{});var c=0,l=new S;function f(t,e){l.has(t)||l.set(t,{missing:[]}),l.get(t).missing.push(e)}u.map(function(r){this._getRevisionTree(r,function(t,e){if(t&&404===t.status&&"missing"===t.message)l.set(r,{missing:o[r]});else{if(t)return s(t);e=e,a=o[i=r].slice(0),Et(e,function(t,e,n,r,o){e=e+"-"+n,n=a.indexOf(e);-1!==n&&(a.splice(n,1),"available"!==o.status&&f(i,e))}),a.forEach(function(t){f(i,t)})}var i,a;if(++c===u.length){var n={};return l.forEach(function(t,e){n[e]=t}),s(null,n)}})},this)}),Kt.prototype.bulkGet=w("bulkGet",function(t,e){k(this,t,e)}),Kt.prototype.compactDocument=w("compactDocument",function(r,u,c){var l=this;this._getRevisionTree(r,function(t,e){if(t)return c(t);var o,i,n=(o={},i=[],Et(e,function(t,e,n,r){n=e+"-"+n;return t&&(o[n]=0),void 0!==r&&i.push({from:r,to:n}),n}),i.reverse(),i.forEach(function(t){void 0===o[t.from]?o[t.from]=1+o[t.to]:o[t.from]=Math.min(o[t.from],1+o[t.to])}),o),a=[],s=[];Object.keys(n).forEach(function(t){n[t]>u&&a.push(t)}),Et(e,function(t,e,n,r,o){n=e+"-"+n;"available"===o.status&&-1!==a.indexOf(n)&&s.push(n)}),l._doCompaction(r,s,c)})}),Kt.prototype.compact=w("compact",function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&function n(r){var t=r._compactionQueue[0],e=t.opts,o=t.callback;r.get("_local/compaction").catch(function(){return!1}).then(function(t){t&&t.last_seq&&(e.last_seq=t.last_seq),r._compact(e,function(t,e){t?o(t):o(null,e),q()(function(){r._compactionQueue.shift(),r._compactionQueue.length&&n(r)})})})}(n)}),Kt.prototype._compact=function(t,n){var r=this,t={return_docs:!1,last_seq:t.last_seq||0},o=[];r.changes(t).on("change",function(t){o.push(r.compactDocument(t.id,0))}).on("complete",function(t){var e=t.last_seq;Promise.all(o).then(function(){return at(r,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<e)&&(t.last_seq=e,t)})}).then(function(){n(null,{ok:!0})}).catch(n)}).on("error",n)},Kt.prototype.get=w("get",function(m,y,_){if("function"==typeof y&&(_=y,y={}),"string"!=typeof m)return _(J(j));if(qt(m)&&"function"==typeof this._getLocal)return this._getLocal(m,_);var n=[],w=this;function r(){var a=[],s=n.length;if(!s)return _(null,a);n.forEach(function(i){w.get(m,{rev:i,revs:y.revs,latest:y.latest,attachments:y.attachments,binary:y.binary},function(t,e){if(t)a.push({missing:i});else{for(var n,r=0,o=a.length;r<o;r++)if(a[r].ok&&a[r].ok._rev===e._rev){n=!0;break}n||a.push({ok:e})}--s||_(null,a)})})}if(!y.open_revs)return this._get(m,y,function(t,e){if(t)return t.docId=m,_(t);var o=e.doc,n=e.metadata,i=e.ctx;if(!y.conflicts||(r=Pt(n)).length&&(o._conflicts=r),Dt(n,o._rev)&&(o._deleted=!0),y.revs||y.revs_info){for(var r=o._rev.split("-"),a=parseInt(r[0],10),s=r[1],u=Ot(n.rev_tree),c=null,l=0;l<u.length;l++){var f=u[l],d=f.ids.map(function(t){return t.id}).indexOf(s);d!==a-1&&(c||-1===d)||(c=f)}if(!c)return(t=new Error("invalid rev tree")).docId=m,_(t);var h,n=c.ids.map(function(t){return t.id}).indexOf(o._rev.split("-")[1])+1,t=c.ids.length-n;c.ids.splice(n,t),c.ids.reverse(),y.revs&&(o._revisions={start:c.pos+c.ids.length-1,ids:c.ids.map(function(t){return t.id})}),y.revs_info&&(h=c.pos+c.ids.length,o._revs_info=c.ids.map(function(t){return{rev:--h+"-"+t.id,status:t.opts.status}}))}if(y.attachments&&o._attachments){var p=o._attachments,g=Object.keys(p).length;if(0===g)return _(null,o);Object.keys(p).forEach(function(r){this._getAttachment(o._id,r,p[r],{rev:o._rev,binary:y.binary,ctx:i},function(t,e){var n=o._attachments[r];n.data=e,delete n.stub,delete n.length,--g||_(null,o)})},w)}else{if(o._attachments)for(var v in o._attachments)o._attachments.hasOwnProperty(v)&&(o._attachments[v].stub=!0);_(null,o)}});if("all"===y.open_revs)this._getRevisionTree(m,function(t,e){return t?_(t):(n=Ct(e).map(function(t){return t.rev}),void r())});else{if(!Array.isArray(y.open_revs))return _(J(I,"function_clause"));for(var n=y.open_revs,t=0;t<n.length;t++){var e=n[t];if("string"!=typeof e||!/^\d+-/.test(e))return _(J(F))}r()}}),Kt.prototype.getAttachment=w("getAttachment",function(n,r,o,i){var a=this;o instanceof Function&&(i=o,o={}),this._get(n,o,function(t,e){return t?i(t):e.doc._attachments&&e.doc._attachments[r]?(o.ctx=e.ctx,o.binary=!0,void a._getAttachment(n,r,e.doc._attachments[r],o,i)):i(J(B))})}),Kt.prototype.allDocs=w("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(J(R,"Query parameter `"+n+"` is not compatible with multi-get"));if(!X(this)&&(n="limit"in(r=e)?r.keys.slice(r.skip,r.limit+r.skip):0<r.skip?r.keys.slice(r.skip):r.keys,r.keys=n,r.skip=0,delete r.limit,r.descending&&(n.reverse(),r.descending=!1),0===e.keys.length))return this._allDocs({limit:0},t)}var r;return this._allDocs(e,t)}),Kt.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),(t=t||{}).return_docs="return_docs"in t?t.return_docs:!t.live,new Mt(this,t,e)},Kt.prototype.close=w("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}),Kt.prototype.info=w("info",function(n){var r=this;this._info(function(t,e){return t?n(t):(e.db_name=e.db_name||r.name,e.auto_compaction=!(!r.auto_compaction||X(r)),e.adapter=r.adapter,void n(null,e))})}),Kt.prototype.id=w("id",function(t){return this._id(t)}),Kt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Kt.prototype.bulkDocs=w("bulkDocs",function(t,o,i){if("function"==typeof o&&(i=o,o={}),o=o||{},!(t=Array.isArray(t)?{docs:t}:t)||!t.docs||!Array.isArray(t.docs))return i(J(O));for(var r,e=0;e<t.docs.length;++e)if("object"!=typeof t.docs[e]||Array.isArray(t.docs[e]))return i(J(K));if(t.docs.forEach(function(n){n._attachments&&Object.keys(n._attachments).forEach(function(t){var e;r=r||"_"===(e=t).charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'",n._attachments[t].content_type||E("warn","Attachment",t,"on document",n._id,"is missing content_type")})}),r)return i(J(U,r));"new_edits"in o||("new_edits"in t?o.new_edits=t.new_edits:o.new_edits=!0);var a=this;o.new_edits||X(a)||t.docs.sort(Ut),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),o=0;o<r.length;o++){var i=r[o];n._attachments[i]=b(n._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}(t.docs);var s=t.docs.map(function(t){return t._id});return this._bulkDocs(t,o,function(t,e){if(t)return i(t);if(o.new_edits||(e=e.filter(function(t){return t.error})),!X(a))for(var n=0,r=e.length;n<r;n++)e[n].id=e[n].id||s[n];i(null,e)})}),Kt.prototype.registerDependentDatabase=w("registerDependentDatabase",function(e,t){var n=new this.constructor(e,this.__opts);at(this,"_local/_pouch_dependentDbs",function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}).then(function(){t(null,{db:n})}).catch(t)}),Kt.prototype.destroy=w("destroy",function(t,r){"function"==typeof t&&(r=t,t={});var o=this,i=!("use_prefix"in o)||o.use_prefix;function a(){o._destroy(t,function(t,e){return t?r(t):(o._destroyed=!0,o.emit("destroyed"),void r(null,e||{ok:!0}))})}if(X(o))return a();o.get("_local/_pouch_dependentDbs",function(t,e){if(t)return 404!==t.status?r(t):a();var e=e.dependentDbs,n=o.constructor,e=Object.keys(e).map(function(t){t=i?t.replace(new RegExp("^"+n.prefix),""):t;return new n(t,o.__opts).destroy()});Promise.all(e).then(a,r)})}),zt.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},zt.prototype.fail=function(t){this.failed=t,this.execute()},zt.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},zt.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},e()(Ft,Kt);var Ht="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},Jt=fetch,Yt=Headers;Ft.adapters={},Ft.preferredAdapters=[],Ft.prefix="_pouch_";var Vt=new s.a;function Gt(t,e){for(var n=t,r=0,o=e.length;r<o&&(n=n[e[r]]);r++);return n}function Qt(t){for(var e=[],n="",r=0,o=t.length;r<o;r++){var i=t[r];"."===i?n=0<r&&"\\"===t[r-1]?n.substring(0,n.length-1)+".":(e.push(n),""):n+=i}return e.push(n),e}!function(e){Object.keys(s.a.prototype).forEach(function(t){"function"==typeof s.a.prototype[t]&&(e[t]=Vt[t].bind(Vt))});var r=e._destructionListeners=new S;e.on("ref",function(t){r.has(t.name)||r.set(t.name,[]),r.get(t.name).push(t)}),e.on("unref",function(t){var e,n;r.has(t.name)&&((n=(e=r.get(t.name)).indexOf(t))<0||(e.splice(n,1),1<e.length?r.set(t.name,e):r.delete(t.name)))}),e.on("destroyed",function(t){var e;r.has(t)&&(e=r.get(t),r.delete(t),e.forEach(function(t){t.emit("destroyed",!0)}))})}(Ft),Ft.adapter=function(t,e,n){e.valid()&&(Ft.adapters[t]=e,n&&Ft.preferredAdapters.push(t))},Ft.plugin=function(e){if("function"==typeof e)e(Ft);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Ft.prototype[t]=e[t]})}return this.__defaults&&(Ft.__defaults=C({},this.__defaults)),Ft},Ft.defaults=function(t){function n(t,e){if(!(this instanceof n))return new n(t,e);e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),e=C({},n.__defaults,e),Ft.call(this,t,e)}return e()(n,Ft),n.preferredAdapters=Ft.preferredAdapters.slice(),Object.keys(Ft).forEach(function(t){t in n||(n[t]=Ft[t])}),n.__defaults=C({},this.__defaults,t),n},Ft.fetch=function(t,e){return Jt(t,e)};var Xt=["$or","$nor","$not"];function Wt(t){return-1<Xt.indexOf(t)}function Zt(t){return Object.keys(t)[0]}function te(t){var n={};return t.forEach(function(e){Object.keys(e).forEach(function(t){var s,u=e[t];"object"!=typeof u&&(u={$eq:u}),Wt(t)?u instanceof Array?n[t]=u.map(function(t){return te([t])}):n[t]=te([u]):(s=n[t]=n[t]||{},Object.keys(u).forEach(function(t){var e,n,r,o,i,a=u[t];return"$gt"===t||"$gte"===t?(r=t,o=a,void(void 0===(i=s).$eq&&(void 0!==i.$gte?"$gte"===r?o>i.$gte&&(i.$gte=o):o>=i.$gte&&(delete i.$gte,i.$gt=o):void 0!==i.$gt?"$gte"===r?o>i.$gt&&(delete i.$gt,i.$gte=o):o>i.$gt&&(i.$gt=o):i[r]=o))):"$lt"===t||"$lte"===t?(i=t,r=a,void(void 0===(o=s).$eq&&(void 0!==o.$lte?"$lte"===i?r<o.$lte&&(o.$lte=r):r<=o.$lte&&(delete o.$lte,o.$lt=r):void 0!==o.$lt?"$lte"===i?r<o.$lt&&(delete o.$lt,o.$lte=r):r<o.$lt&&(o.$lt=r):o[i]=r))):"$ne"===t?(e=a,void("$ne"in(n=s)?n.$ne.push(e):n.$ne=[e])):"$eq"===t?(n=a,delete(e=s).$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,void(e.$eq=n)):void(s[t]=a)}))})}),n}var ee=-324,ne=3,re="";function oe(t,e){if(t===e)return 0;t=ie(t),e=ie(e);var n=se(t),r=se(e);if(n-r!=0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return t===e?0:e<t?1:-1}return(Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var o=oe(t[r],e[r]);if(0!==o)return o}return t.length===e.length?0:t.length>e.length?1:-1}:function(t,e){for(var n=Object.keys(t),r=Object.keys(e),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=oe(n[i],r[i]);if(0!==a)return a;if(0!==(a=oe(t[n[i]],e[r[i]])))return a}return n.length===r.length?0:n.length>r.length?1:-1})(t,e)}function ie(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e,n=t;if(Array.isArray(t)){var r=t.length;t=new Array(r);for(var o=0;o<r;o++)t[o]=ie(n[o])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var i in t={},n)!n.hasOwnProperty(i)||void 0!==(e=n[i])&&(t[i]=ie(e))}}return t}function ae(t){return se(t=ie(t))+re+function(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var n,r,e=t.toExponential().split(/e\+?/),o=parseInt(e[1],10),i=t<0,t=i?"0":"2",o=(n=((i?-o:o)-ee).toString(),r=ne,function(){for(var t="",e=r-n.length;t.length<e;)t+="0";return t}()+n);t+=re+o;e=Math.abs(parseFloat(e[0])),e=(e=(e=i?10-e:e).toFixed(20)).replace(/\.?0+$/,"");return t+(re+e)}(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,o=n.length,i="";if(e)for(;++r<o;)i+=ae(n[r]);else for(;++r<o;){var a=n[r];i+=ae(a)+ae(t[a])}return i}return""}(t)+"\0"}function se(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}function ue(a,s,t){return t.every(function(t){var e,n,r=s[t],o=Qt(t),i=Gt(a,o);return Wt(t)?(e=r,n=a,"$or"!==t?"$not"!==t?!e.find(function(t){return ue(n,t,Object.keys(t))}):!ue(n,e,Object.keys(e)):e.some(function(t){return ue(n,t,Object.keys(t))})):ce(r,a,o,i)})}function ce(n,r,o,i){return!n||("object"==typeof n?Object.keys(n).every(function(t){var e=n[t];return function(t){if(he[t])return he[t](r,e,o,i);throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all')}(t)}):n===i)}function le(t){return null!=t}function fe(t){return void 0!==t}function de(e,t){return t.some(function(t){return e instanceof Array?-1<e.indexOf(t):e===t})}var he={$elemMatch:function(e,n,r,t){return!!Array.isArray(t)&&0!==t.length&&("object"==typeof t[0]?t.some(function(t){return ue(t,n,Object.keys(n))}):t.some(function(t){return ce(n,e,r,t)}))},$allMatch:function(e,n,r,t){return!!Array.isArray(t)&&0!==t.length&&("object"==typeof t[0]?t.every(function(t){return ue(t,n,Object.keys(n))}):t.every(function(t){return ce(n,e,r,t)}))},$eq:function(t,e,n,r){return fe(r)&&0===oe(r,e)},$gte:function(t,e,n,r){return fe(r)&&0<=oe(r,e)},$gt:function(t,e,n,r){return fe(r)&&0<oe(r,e)},$lte:function(t,e,n,r){return fe(r)&&oe(r,e)<=0},$lt:function(t,e,n,r){return fe(r)&&oe(r,e)<0},$exists:function(t,e,n,r){return e?fe(r):!fe(r)},$mod:function(t,r,e,n){return le(n)&&function(t){var e=r[0],n=r[1];if(0===e)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(e,10)!==e)throw new Error("Divisor is not an integer");if(parseInt(n,10)!==n)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%e===n}(n)},$ne:function(t,e,n,r){return e.every(function(t){return 0!==oe(r,t)})},$in:function(t,e,n,r){return le(r)&&de(r,e)},$nin:function(t,e,n,r){return le(r)&&!de(r,e)},$size:function(t,e,n,r){return le(r)&&r.length===e},$all:function(t,e,n,r){return Array.isArray(r)&&(o=r,e.every(function(t){return-1<o.indexOf(t)}));var o},$regex:function(t,e,n,r){return le(r)&&(r=r,new RegExp(e).test(r))},$type:function(t,e,n,r){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,e)}};function pe(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){t="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+t+'"'))}e()}function ge(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=Z(t.view):t.filter=Z(t.filter))}function ve(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!X(t.db)}function me(n,r){var o,i=r.complete;if("_view"===r.filter){if(!r.view||"string"!=typeof r.view){var t=J(U,"`view` filter parameter not found or invalid.");return i(t)}var a=W(r.view);n.db.get("_design/"+a[0],function(t,e){if(n.isCancelled)return i(null,{status:"cancelled"});if(t)return i(Y(t));t=e&&e.views&&e.views[a[1]]&&e.views[a[1]].map;if(!t)return i(J(B,e.views?"missing json key: "+a[1]:"missing json key: views"));r.filter=it(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),n.doChanges(r)})}else r.selector?(r.filter=function(t){return function(t,a){if("object"!=typeof a)throw new Error("Selector error: expected a JSON object");var e,n,r,o,i=(i=[{doc:t}],e={selector:a=function(){var e=M(a),t=!1;!function t(e,n){for(var r in e){"$and"===r&&(n=!0);r=e[r];"object"==typeof r&&(n=t(r,n))}return n}(e,!1)||("$and"in(e=function t(e){for(var n in e){if(Array.isArray(e))for(var r in e)e[r].$and&&(e[r]=te(e[r].$and));n=e[n];"object"==typeof n&&t(n)}return e}(e))&&(e=te(e.$and)),t=!0),["$or","$nor"].forEach(function(t){t in e&&e[t].forEach(function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n],o=t[r];"object"==typeof o&&null!==o||(t[r]={$eq:o})}})}),"$not"in e&&(e.$not=te([e.$not]));for(var n=Object.keys(e),r=0;r<n.length;r++){var o=n[r],i=e[o];"object"!=typeof i||null===i?i={$eq:i}:"$ne"in i&&!t&&(i.$ne=[i.$ne]),e[o]=i}return e}()},n=Object.keys(a),i=i.filter(function(t){return ue(t.doc,e.selector,n)}),e.sort&&(o=e.sort,i=i.sort(function(t,e){var n=oe(s(t.doc),s(e.doc));return 0!==n?n:(t=t.doc._id)<(e=e.doc._id)?-1:e<t?1:0}),"string"!=typeof e.sort[0]&&"desc"===(r=e.sort[0])[Zt(r)]&&(i=i.reverse())),("limit"in e||"skip"in e)&&(t=e.skip||0,r=("limit"in e?e.limit:i.length)+t,i=i.slice(t,r)),i);function s(e){return o.map(function(t){t=Qt(Zt(t));return Gt(e,t)})}return i&&1===i.length}(t,r.selector)},n.doChanges(r)):(o=W(r.filter),n.db.get("_design/"+o[0],function(t,e){if(n.isCancelled)return i(null,{status:"cancelled"});if(t)return i(Y(t));t=e&&e.filters&&e.filters[o[1]];if(!t)return i(J(B,e&&e.filters?"missing json key: "+o[1]:"missing json key: filters"));r.filter=it('"use strict";\nreturn '+t+";",{}),n.doChanges(r)}))}function ye(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}Ft.plugin(function(t){t._changesFilterPlugin={validate:pe,normalize:ge,shouldFilter:ve,filter:me}}),Ft.version="7.2.2";var _e=ye(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),we=ye(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function be(t){if(!/^\d+-/.test(t))return J(F);var e=t.indexOf("-"),n=t.substring(0,e),e=t.substring(e+1);return{prefix:parseInt(n,10),id:e}}function ke(t,e,n){var r,o,i;n=n||{deterministic_revs:!0};var a={status:"available"};if(t._deleted&&(a.deleted=!0),e)if(t._id||(t._id=bt()),o=wt(t,n.deterministic_revs),t._rev){if((i=be(t._rev)).error)return i;t._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[o,a,[]]]]}],r=i.prefix+1}else t._rev_tree=[{pos:1,ids:[o,a,[]]}],r=1;else if(t._revisions&&(t._rev_tree=function(t){for(var e=t.start-t.ids.length+1,n=t.ids,r=[n[0],a,[]],o=1,i=n.length;o<i;o++)r=[n[o],{status:"missing"},[r]];return[{pos:e,ids:r}]}(t._revisions),r=t._revisions.start,o=t._revisions.ids[0]),!t._rev_tree){if((i=be(t._rev)).error)return i;r=i.prefix,o=i.id,t._rev_tree=[{pos:r,ids:[o,a,[]]}]}Q(t._id),t._rev=r+"-"+o;var s,u={metadata:{},data:{}};for(s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var c="_"===s[0];if(c&&!_e[s]){var l=J($,s);throw l.message=$.message+": "+s,l}c&&!we[s]?u.metadata[s.slice(1)]=t[s]:u.data[s]=t[s]}return u}function Ee(t,e,n){if(t.stub)return n();var r,o,i;"string"==typeof t.data?function(e,t,n){var r=function(t){try{return st(t)}catch(t){return{error:J(D,"Attachment is not a valid base64 string")}}}(e.data);if(r.error)return n(r.error);e.length=r.length,e.data="blob"===t?lt(r,e.content_type):"base64"===t?ut(r):r,yt(r,function(t){e.digest="md5-"+t,n()})}(t,e,n):(o=e,i=n,yt((r=t).data,function(t){r.digest="md5-"+t,r.length=r.data.size||r.data.length||0,"binary"===o?ht(r.data,function(t){r.data=t,i()}):"base64"===o?pt(r.data,function(t){r.data=t,i()}):i()}))}function Ae(s,t,r,u,o,c,l,f,e){s=s||1e3;var d=f.new_edits,i=new S,n=0,a=t.length;function h(){++n===a&&e&&e()}t.forEach(function(t,n){var e;t._id&&qt(t._id)?(e=t._deleted?"_removeLocal":"_putLocal",r[e](t,{ctx:o},function(t,e){c[n]=t||e,h()})):(e=t.metadata.id,i.has(e)?(a--,i.get(e).push([t,n])):i.set(e,[[t,n]]))}),i.forEach(function(r,o){var i=0;function a(){(++i<r.length?t:h)()}function t(){var t=r[i],e=t[0],n=t[1];u.has(o)?function(t,e,n,r,o,i,a,s){if(function(t,e){for(var n,r=t.slice(),e=e.split("-"),o=parseInt(e[0],10),i=e[1];n=r.pop();){if(n.pos===o&&n.ids[0]===i)return 1;for(var a=n.ids[2],s=0,u=a.length;s<u;s++)r.push({pos:n.pos+1,ids:a[s]})}}(e.rev_tree,n.metadata.rev)&&!s)return r[o]=n,i();var u=e.winningRev||kt(e),c="deleted"in e?e.deleted:Dt(e,u),l="deleted"in n.metadata?n.metadata.deleted:Dt(n.metadata),f=/^1-/.test(n.metadata.rev);c&&!l&&s&&f&&((f=n.data)._rev=u,f._id=n.metadata.id,n=ke(f,s));t=Lt(e.rev_tree,n.metadata.rev_tree[0],t);if(s&&(c&&l&&"new_leaf"!==t.conflicts||!c&&"new_leaf"!==t.conflicts||c&&!l&&"new_branch"===t.conflicts)){var d=J(x);return r[o]=d,i()}d=n.metadata.rev;n.metadata.rev_tree=t.tree,n.stemmedRevs=t.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);t=kt(n.metadata),e=Dt(n.metadata,t),c=c===e?0:c<e?-1:1;a(n,t,e,d===t?e:Dt(n.metadata,d),!0,c,o,i)}(s,u.get(o),e,c,n,a,l,d):(t=Lt([],e.metadata.rev_tree[0],s),e.metadata.rev_tree=t.tree,e.stemmedRevs=t.stemmedRevs||[],function(t,e,n){var r=kt(t.metadata),o=Dt(t.metadata,r);if("was_delete"in f&&o)return c[e]=J(B,"deleted"),n();if(d&&"missing"===t.metadata.rev_tree[0].ids[1].status){var i=J(x);return c[e]=i,n()}l(t,r,o,o,!1,o?0:1,e,n)}(e,n,a))}t()})}var Ce="document-store",Pe="by-sequence",Oe="attach-store",Se="attach-seq-store",Be="meta-store",xe="local-store",je="detect-blob-support";function Te(n){return function(t){var e="unknown_error";t.target&&t.target.error&&(e=t.target.error.name||t.target.error.message),n(J(z,e,t.type))}}function Le(t,e,n){return{data:function(e){try{return JSON.stringify(e)}catch(t){return r.a.stringify(e)}}(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function Ie(t){if(!t)return null;var e=function(e){try{return JSON.parse(e)}catch(t){return r.a.parse(e)}}(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function De(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function qe(t,e,n,r){n?r(t?"string"!=typeof t?t:ft(t,e):ct([""],{type:e})):t?"string"!=typeof t?dt(t,function(t){r(ut(t))}):r(t):r("")}function Me(r,o,i,t){var e=Object.keys(r._attachments||{});if(!e.length)return t&&t();var n=0;function a(){++n===e.length&&t&&t()}e.forEach(function(t){var e,n;o.attachments&&o.include_docs?(n=(e=r._attachments[t]).digest,i.objectStore(Oe).get(n).onsuccess=function(t){e.body=t.target.result.body,a()}):(r._attachments[t].stub=!0,a())})}function Ne(t,a){return Promise.all(t.map(function(i){if(i.doc&&i.doc._attachments){var t=Object.keys(i.doc._attachments);return Promise.all(t.map(function(n){var r=i.doc._attachments[n];if("body"in r){var t=r.body,o=r.content_type;return new Promise(function(e){qe(t,o,a,function(t){i.doc._attachments[n]=C(b(r,["digest","content_type"]),{data:t}),e()})})}}))}}))}function Re(t,e,n){var r=[],o=n.objectStore(Pe),i=n.objectStore(Oe),a=n.objectStore(Se),s=t.length;function u(){--s||r.length&&r.forEach(function(e){a.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1)).onsuccess=function(t){t.target.result||i.delete(e)}})}t.forEach(function(t){o.index("_doc_id_rev").getKey(e+"::"+t).onsuccess=function(t){t=t.target.result;if("number"!=typeof t)return u();o.delete(t),a.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(t){var e=t.target.result;e?(t=e.value.digestSeq.split("::")[0],r.push(t),a.delete(e.primaryKey),e.continue()):u()}}})}function $e(t,e,n){try{return{txn:t.transaction(e,n)}}catch(t){return{error:t}}}var Ue=new y;function Ke(a,t,s,f,e,n){for(var d,h,p,_,g,r,o,i,u=t.docs,c=0,l=u.length;c<l;c++){var v=u[c];v._id&&qt(v._id)||(v=u[c]=ke(v,s.new_edits,a)).error&&!o&&(o=v)}if(o)return n(o);var m=!1,w=0,y=new Array(u.length),b=new S,k=!1,t=f._meta.blobSupport?"blob":"base64";function E(){m=!0,A()}function A(){i&&m&&(i.docCount+=w,r.put(i))}function C(){k||(Ue.notify(f._meta.name),n(null,y))}function P(t,e,n,r,o,i,a,s){t.metadata.winningRev=e,t.metadata.deleted=n;var u,c,l,f,d,h,p,g,v=t.data;if(v._id=t.metadata.id,v._rev=t.metadata.rev,r&&(v._deleted=!0),v._attachments&&Object.keys(v._attachments).length)return c=e,l=n,f=o,d=a,h=s,v=(u=t).data,p=0,void(g=Object.keys(v._attachments)).forEach(function(t){var e,n,r,o=u.data._attachments[t];o.stub?(p++,m()):(t=o.data,delete o.data,o.revpos=parseInt(c,10),o=o.digest,n=t,r=y,_.count(e=o).onsuccess=function(t){if(t.target.result)return r();_.put({digest:e,body:n}).onsuccess=r})});function m(){p===g.length&&O(u,c,l,f,d,h)}function y(){p++,m()}w+=i,A(),O(t,e,n,o,a,s)}function O(r,o,a,s,t,e){var n=r.data,u=r.metadata;function i(t){var e,i,n=r.stemmedRevs||[];(n=s&&f.auto_compaction?n.concat((e=r.metadata,i=[],Et(e.rev_tree,function(t,e,n,r,o){"available"!==o.status||t||(i.push(e+"-"+n),o.status="missing")}),i)):n)&&n.length&&Re(n,r.metadata.id,d),u.seq=t.target.result;t=Le(u,o,a);h.put(t).onsuccess=c}function c(){y[t]={ok:!0,id:u.id,rev:u.rev},b.set(r.metadata.id,r.metadata),function(t,e,n){var r=0,o=Object.keys(t.data._attachments||{});if(!o.length)return n();function i(){++r===o.length&&n()}for(var a,s,u=0;u<o.length;u++)a=o[u],s=void 0,a=t.data._attachments[a].digest,(s=g.put({seq:e,digestSeq:a+"::"+e})).onsuccess=i,s.onerror=function(t){t.preventDefault(),t.stopPropagation(),i()}}(r,u.seq,e)}n._doc_id_rev=u.id+"::"+u.rev,delete n._id,delete n._rev;var l=p.put(n);l.onsuccess=i,l.onerror=function(t){t.preventDefault(),t.stopPropagation(),p.index("_doc_id_rev").getKey(n._doc_id_rev).onsuccess=function(t){p.put(n,t.target.result).onsuccess=i}}}!function(t,i,e){if(!t.length)return e();var a,n=0;function s(){n++,t.length===n&&(a?e(a):e())}t.forEach(function(t){var e,n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],r=0;if(!n.length)return s();function o(t){a=t,++r===n.length&&s()}for(e in t.data._attachments)t.data._attachments.hasOwnProperty(e)&&Ee(t.data._attachments[e],i,o)})}(u,t,function(t){return t?n(t):void function(){var t=$e(e,[Ce,Pe,Oe,xe,Se,Be],"readwrite");if(t.error)return n(t.error);(d=t.txn).onabort=Te(n),d.ontimeout=Te(n),d.oncomplete=C,h=d.objectStore(Ce),p=d.objectStore(Pe),_=d.objectStore(Oe),g=d.objectStore(Se),(r=d.objectStore(Be)).get(Be).onsuccess=function(t){i=t.target.result,A()},function(r){var o=[];if(u.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){t=e.data._attachments[t];t.stub&&o.push(t.digest)})}),!o.length)return r();var i,a=0;o.forEach(function(t){function e(t){t&&!i&&(i=t),++a===o.length&&r(i)}var n=t;_.get(n).onsuccess=function(t){t.target.result?e():((t=J(H,"unknown stub attachment with digest "+n)).status=412,e(t))}})}(function(t){return t?(k=!0,n(t)):void function(){if(u.length)for(var t=0,e=0,n=u.length;e<n;e++){var r=u[e];r._id&&qt(r._id)?o():h.get(r.metadata.id).onsuccess=i}function o(){++t===u.length&&Ae(a.revs_limit,u,f,b,d,y,P,s,E)}function i(t){t=Ie(t.target.result);t&&b.set(t.id,t),o()}}()})}()})}function ze(n,r,t,o,i){var a,s,e;function u(t){s=t.target.result,a&&i(a,s,e)}function c(t){a=t.target.result,s&&i(a,s,e)}function l(t){t=t.target.result;if(!t)return i();i([t.key],[t.value],t)}-1===o&&(o=1e3),"function"==typeof n.getAll&&"function"==typeof n.getAllKeys&&1<o&&!t?(e={continue:function(){if(!a.length)return i();var t,e=a[a.length-1];if(r&&r.upper)try{t=IDBKeyRange.bound(e,r.upper,!0,r.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return i()}else t=IDBKeyRange.lowerBound(e,!0);r=t,s=a=null,n.getAll(r,o).onsuccess=u,n.getAllKeys(r,o).onsuccess=c}},n.getAll(r,o).onsuccess=u,n.getAllKeys(r,o).onsuccess=c):t?n.openCursor(r,"prev").onsuccess=l:n.openCursor(r).onsuccess=l}function Fe(i,t,e){var n,r="startkey"in i&&i.startkey,o="endkey"in i&&i.endkey,a="key"in i&&i.key,s="keys"in i&&i.keys,u=i.skip||0,c="number"==typeof i.limit?i.limit:-1,l=!1!==i.inclusive_end;if(!s&&(w=(n=function(t,e,n,r,o){try{if(t&&e)return o?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return o?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return o?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(t){return{error:t}}return null}(r,o,l,a,i.descending))&&n.error)&&("DataError"!==w.name||0!==w.code))return e(J(z,w.name,w.message));l=[Ce,Pe,Be];i.attachments&&l.push(Oe);a=$e(t,l,"readonly");if(a.error)return e(a.error);var f=a.txn;f.oncomplete=function(){i.attachments?Ne(A,i.binary).then(O):O()},f.onabort=Te(e);var d,h,p,g,v,m,y,_,w,b,k,t=f.objectStore(Ce),l=f.objectStore(Pe),a=f.objectStore(Be),E=l.index("_doc_id_rev"),A=[];function C(t){for(var e=0,n=t.length;e<n&&A.length!==c;e++){var r=t[e];r.error&&s?A.push(r):function(t,e){var n,r,o={id:e.id,key:e.id,value:{rev:t}};e.deleted?s&&(A.push(o),o.value.deleted=!0,o.doc=null):u--<=0&&(A.push(o),i.include_docs&&(r=o,t=(n=e).id+"::"+t,E.get(t).onsuccess=function(t){r.doc=De(t.target.result)||{},!i.conflicts||(t=Pt(n)).length&&(r.doc._conflicts=t),Me(r.doc,i,f)}))}((r=Ie(r)).winningRev,r)}}function P(t,e,n){n&&(C(e),A.length<c&&n.continue())}function O(){var t={total_rows:d,offset:i.skip,rows:A};i.update_seq&&void 0!==h&&(t.update_seq=h),e(null,t)}return a.get(Be).onsuccess=function(t){d=t.target.result.docCount},i.update_seq&&(p=function(t){t.target.result&&0<t.target.result.length&&(h=t.target.result[0])},l.openCursor(null,"prev").onsuccess=function(t){var e=t.target.result,t=void 0;return e&&e.key&&(t=e.key),p({target:{result:[t]}})}),!w&&0!==c&&(s?(g=i.keys,v=t,m=P,y=new Array(g.length),_=0,g.forEach(function(e,n){v.get(e).onsuccess=function(t){t.target.result?y[n]=t.target.result:y[n]={key:e,error:"not_found"},++_===g.length&&m(g,y,{})}}),0):-1===c?(l=n,b=function(t){t=t.target.result;C(t=i.descending?t.reverse():t)},"function"!=typeof(w=t).getAll?(k=[],w.openCursor(l).onsuccess=function(t){t=t.target.result;t?(k.push(t.value),t.continue()):b({target:{result:k}})}):w.getAll(l).onsuccess=b,0):void ze(t,n,i.descending,c+u,P))}var He=!1,Je=[];function Ye(){!He&&Je.length&&(He=!0,Je.shift()())}function Ve(t,n,r){Je.push(function(){t(function(t,e){!function(t,e,n,r){try{t(e,n)}catch(e){r.emit("error",e)}}(n,t,e,r),He=!1,q()(function(){Ye()})})}),Ye()}function Ge(u,t,e,n){if((u=M(u)).continuous){var r=e+":"+bt();return Ue.addListener(e,r,t,u),Ue.notify(e),{cancel:function(){Ue.removeListener(e,r)}}}var c=u.doc_ids&&new _(u.doc_ids);u.since=u.since||0;var l=u.since,f="limit"in u?u.limit:-1;0===f&&(f=1);var d,h=[],p=0,g=V(u),v=new S;function m(t,e,n,r){if(n.seq!==e)return r();if(n.winningRev===t._rev)return r(n,t);t=t._id+"::"+n.winningRev;i.get(t).onsuccess=function(t){r(n,De(t.target.result))}}function o(){u.complete(null,{results:h,last_seq:l})}t=[Ce,Pe];u.attachments&&t.push(Oe);t=$e(n,t,"readonly");if(t.error)return u.complete(t.error);(d=t.txn).onabort=Te(u.complete),d.oncomplete=function(){!u.continuous&&u.attachments?Ne(h).then(o):o()};var t=d.objectStore(Pe),y=d.objectStore(Ce),i=t.index("_doc_id_rev");ze(t,u.since&&!u.descending?IDBKeyRange.lowerBound(u.since,!0):null,u.descending,f,function(r,t,i){var a,s,o;i&&r.length&&(a=new Array(r.length),s=new Array(r.length),o=0,t.forEach(function(t,n){!function(e,n,r){if(c&&!c.has(e._id))return r();var o=v.get(e._id);if(o)return m(e,n,o,r);y.get(e._id).onsuccess=function(t){o=Ie(t.target.result),v.set(e._id,o),m(e,n,o,r)}}(De(t),r[n],function(t,e){s[n]=t,a[n]=e,++o===r.length&&function(){for(var t=[],e=0,n=a.length;e<n&&p!==f;e++){var r,o=a[e];o&&(r=s[e],t.push(function(t,e){var n=u.processChange(e,t,u);l=n.seq=t.seq;t=g(n);return"object"==typeof t?Promise.reject(t):t?(p++,u.return_docs&&h.push(n),u.attachments&&u.include_docs?new Promise(function(t){Me(e,u,d,function(){Ne([n],u.binary).then(function(){t(n)})})}):Promise.resolve(n)):Promise.resolve()}(r,o)))}Promise.all(t).then(function(t){for(var e=0,n=t.length;e<n;e++)t[e]&&u.onChange(t[e])}).catch(u.complete),p!==f&&i.continue()}()})}))})}var Qe,Xe=new S,We=new S;function Ze(e,t){var n=this;Ve(function(t){!function(f,r,d){var h=r.name,p=null;function i(t,r){var o=t.objectStore(Ce);o.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),o.openCursor().onsuccess=function(t){var e,n=t.target.result;n?(t=Dt(e=n.value),e.deletedOrLocal=t?"1":"0",o.put(e),n.continue()):r()}}function a(t,a){var s=t.objectStore(xe),u=t.objectStore(Ce),c=t.objectStore(Pe);u.openCursor().onsuccess=function(t){var e,n,r,o,i=t.target.result;i?(t=qt(n=(r=i.value).id),r=kt(r),t?(e=n+"::"+r,t=n+"::",r=n+"::~",n=c.index("_doc_id_rev"),r=IDBKeyRange.bound(t,r,!1,!1),(o=n.openCursor(r)).onsuccess=function(t){(o=t.target.result)?((t=o.value)._doc_id_rev===e&&s.put(t),c.delete(o.primaryKey),o.continue()):(u.delete(i.primaryKey),i.continue())}):i.continue()):a&&a()}}function s(t,u){var e=t.objectStore(Pe),n=t.objectStore(Oe),c=t.objectStore(Se);n.count().onsuccess=function(t){if(!t.target.result)return u();e.openCursor().onsuccess=function(t){t=t.target.result;if(!t)return u();for(var e=t.value,n=t.primaryKey,r=Object.keys(e._attachments||{}),o={},i=0;i<r.length;i++)o[e._attachments[r[i]].digest]=!0;for(var a=Object.keys(o),i=0;i<a.length;i++){var s=a[i];c.put({seq:n,digestSeq:s+"::"+n})}t.continue()}}}function u(t){var a=t.objectStore(Pe),s=t.objectStore(Ce);s.openCursor().onsuccess=function(t){var e=t.target.result;if(e){var n,r,o=(n=e.value).data?Ie(n):(n.deleted="1"===n.deletedOrLocal,n);if(o.winningRev=o.winningRev||kt(o),o.seq)return i();t=o.id+"::",n=o.id+"::￿",n=a.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,n)),r=0,n.onsuccess=function(t){var e=t.target.result;if(!e)return o.seq=r,i();t=e.primaryKey;r<t&&(r=t),e.continue()}}function i(){var t=Le(o,o.winningRev,o.deleted);s.put(t).onsuccess=function(){e.continue()}}}}f._meta=null,f._remote=!1,f.type=function(){return"idb"},f._id=g(function(t){t(null,f._meta.instanceId)}),f._bulkDocs=function(t,e,n){Ke(r,t,e,f,p,n)},f._get=function(t,n,e){var r,o,i,a=n.ctx;if(!a){var s=$e(p,[Ce,Pe,Oe],"readonly");if(s.error)return e(s.error);a=s.txn}function u(){e(i,{doc:r,metadata:o,ctx:a})}a.objectStore(Ce).get(t).onsuccess=function(t){if(!(o=Ie(t.target.result)))return i=J(B,"missing"),u();if(n.rev)e=n.latest?function(t,e){for(var n,r=e.rev_tree.slice();n=r.pop();){var o=n.pos,i=n.ids,a=i[0],s=i[1],u=i[2],i=0===u.length,c=n.history?n.history.slice():[];if(c.push({id:a,pos:o,opts:s}),i)for(var l=0,f=c.length;l<f;l++){var d=c[l];if(d.pos+"-"+d.id===t)return o+"-"+a}for(var h=0,p=u.length;h<p;h++)r.push({pos:o+1,ids:u[h],history:c})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}(n.rev,o):n.rev;else{var e=o.winningRev;if(Dt(o))return i=J(B,"deleted"),u()}t=a.objectStore(Pe),e=o.id+"::"+e;t.index("_doc_id_rev").get(e).onsuccess=function(t){if(!(r=(r=t.target.result)&&De(r)))return i=J(B,"missing"),u();u()}}},f._getAttachment=function(t,e,n,r,o){var i;if(r.ctx)i=r.ctx;else{var a=$e(p,[Ce,Pe,Oe],"readonly");if(a.error)return o(a.error);i=a.txn}var a=n.digest,s=n.content_type;i.objectStore(Oe).get(a).onsuccess=function(t){qe(t.target.result.body,s,r.binary,function(t){o(null,t)})}},f._info=function(t){var e,n,r=$e(p,[Be,Pe],"readonly");if(r.error)return t(r.error);r=r.txn;r.objectStore(Be).get(Be).onsuccess=function(t){n=t.target.result.docCount},r.objectStore(Pe).openCursor(null,"prev").onsuccess=function(t){t=t.target.result;e=t?t.key:0},r.oncomplete=function(){t(null,{doc_count:n,update_seq:e,idb_attachment_format:f._meta.blobSupport?"binary":"base64"})}},f._allDocs=function(t,e){Fe(t,p,e)},f._changes=function(t){return Ge(t,f,h,p)},f._close=function(t){p.close(),Xe.delete(h),t()},f._getRevisionTree=function(t,e){var n=$e(p,[Ce],"readonly");if(n.error)return e(n.error);n.txn.objectStore(Ce).get(t).onsuccess=function(t){t=Ie(t.target.result);t?e(null,t.rev_tree):e(J(B))}},f._doCompaction=function(r,i,t){var e=$e(p,[Ce,Pe,Oe,Se],"readwrite");if(e.error)return t(e.error);var o=e.txn;o.objectStore(Ce).get(r).onsuccess=function(t){var e=Ie(t.target.result);Et(e.rev_tree,function(t,e,n,r,o){-1!==i.indexOf(e+"-"+n)&&(o.status="missing")}),Re(i,r,o);var n=e.winningRev,t=e.deleted;o.objectStore(Ce).put(Le(e,n,t))},o.onabort=Te(t),o.oncomplete=function(){t()}},f._getLocal=function(t,e){var n=$e(p,[xe],"readonly");if(n.error)return e(n.error);t=n.txn.objectStore(xe).get(t);t.onerror=Te(e),t.onsuccess=function(t){t=t.target.result;t?(delete t._doc_id_rev,e(null,t)):e(J(B))}},f._putLocal=function(e,n,r){"function"==typeof n&&(r=n,n={}),delete e._revisions;var o=e._rev,t=e._id;e._rev=o?"0-"+(parseInt(o.split("-")[1],10)+1):"0-1";var i,a=n.ctx;if(!a){var s=$e(p,[xe],"readwrite");if(s.error)return r(s.error);(a=s.txn).onerror=Te(r),a.oncomplete=function(){i&&r(null,i)}}var u,c=a.objectStore(xe);o?(u=c.get(t)).onsuccess=function(t){t=t.target.result;t&&t._rev===o?c.put(e).onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},n.ctx&&r(null,i)}:r(J(x))}:((u=c.add(e)).onerror=function(t){r(J(x)),t.preventDefault(),t.stopPropagation()},u.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},n.ctx&&r(null,i)})},f._removeLocal=function(e,n,r){"function"==typeof n&&(r=n,n={});var o,t=n.ctx;if(!t){var i=$e(p,[xe],"readwrite");if(i.error)return r(i.error);(t=i.txn).oncomplete=function(){o&&r(null,o)}}var a=e._id,s=t.objectStore(xe),t=s.get(a);t.onerror=Te(r),t.onsuccess=function(t){t=t.target.result;t&&t._rev===e._rev?(s.delete(a),o={ok:!0,id:a,rev:"0-0"},n.ctx&&r(null,o)):r(J(B))}},f._destroy=function(t,e){Ue.removeAllListeners(h);var n=We.get(h);n&&n.result&&(n.result.close(),Xe.delete(h));n=indexedDB.deleteDatabase(h);n.onsuccess=function(){We.delete(h),l&&h in localStorage&&delete localStorage[h],e(null,{ok:!0})},n.onerror=Te(e)};var t=Xe.get(h);if(t)return p=t.idb,f._meta=t.global,q()(function(){d(null,f)});t=indexedDB.open(h,5);We.set(h,t),t.onupgradeneeded=function(t){var e=t.target.result;if(t.oldVersion<1)return function(t){var e=t.createObjectStore(Ce,{keyPath:"id"});t.createObjectStore(Pe,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(Oe,{keyPath:"digest"}),t.createObjectStore(Be,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(je),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(xe,{keyPath:"_id"});t=t.createObjectStore(Se,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}(e);var n=t.currentTarget.transaction;t.oldVersion<3&&e.createObjectStore(xe,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.oldVersion<4&&((e=e.createObjectStore(Se,{autoIncrement:!0})).createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0}));var r=[i,a,s,u],o=t.oldVersion;!function t(){var e=r[o-1];o++,e&&e(n,t)}()},t.onsuccess=function(t){(p=t.target.result).onversionchange=function(){p.close(),Xe.delete(h)},p.onabort=function(t){E("error","Database has a global failure",t.target.error),p.close(),Xe.delete(h)};var e,n,r,o,i,a,s=p.transaction([Be,je,Ce],"readwrite"),u=!1;function c(){void 0!==r&&u&&(f._meta={name:h,instanceId:o,blobSupport:r},Xe.set(h,{idb:p,global:f._meta}),d(null,f))}function l(){var t;void 0!==n&&void 0!==e&&((t=h+"_id")in e?o=e[t]:e[t]=o=bt(),e.docCount=n,s.objectStore(Be).put(e))}s.objectStore(Be).get(Be).onsuccess=function(t){e=t.target.result||{id:Be},l()},i=function(t){n=t,l()},s.objectStore(Ce).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){i(t.target.result)},Qe||(a=s,Qe=new Promise(function(n){var t=ct([""]),t=a.objectStore(je).put(t,"key");t.onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);n(e||!t||43<=parseInt(t[1],10))},t.onerror=a.onabort=function(t){t.preventDefault(),t.stopPropagation(),n(!1)}}).catch(function(){return!1})),Qe.then(function(t){r=t,c()}),s.oncomplete=function(){u=!0,c()},s.onabort=Te(d)},t.onerror=function(t){t=t.target.error&&t.target.error.message;t?-1!==t.indexOf("stored database is a higher version")&&(t=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):t="Failed to open indexedDB, are you in private browsing mode?",E("error",t),d(J(z,t))}}(n,e,t)},t,n.constructor)}Ze.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}};var tn={};function en(t){var t=t.doc||t.ok,e=t&&t._attachments;e&&Object.keys(e).forEach(function(t){t=e[t];t.data=ft(t.data,t.content_type)})}function nn(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function rn(n){return n._attachments&&Object.keys(n._attachments)?Promise.all(Object.keys(n._attachments).map(function(t){var e=n._attachments[t];if(e.data&&"string"!=typeof e.data)return new Promise(function(t){pt(e.data,t)}).then(function(t){e.data=t})})):Promise.resolve()}function on(t,e){return an(t,t.db+"/"+e)}function an(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function sn(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function un(s,t){var e=this,v=function(t,e){!function(){if(e.prefix){var t=ot(e.prefix).protocol;return"http"===t||"https"===t}}()||(n=e.name.substr(e.prefix.length),t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(n));var n=ot(t);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});t=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=t.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=t.join("/"),n}(s.name,s),n=on(v,"");s=M(s);var r,a=function(t,e){(e=e||{}).headers=e.headers||new Yt,e.credentials="include",(s.auth||v.auth)&&(n=(o=s.auth||v.auth).username+":"+o.password,r=ut(unescape(encodeURIComponent(n))),e.headers.set("Authorization","Basic "+r));var n,r,o,i,a=s.headers||{};return Object.keys(a).forEach(function(t){e.headers.append(t,a[t])}),i=e,n=-1!==(o="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"").indexOf("msie"),r=-1!==o.indexOf("trident"),o=-1!==o.indexOf("edge"),i=!("method"in i)||"GET"===i.method,(n||r||o)&&i&&(t+=(-1===t.indexOf("?")?"?":"&")+"_nonce="+Date.now()),(s.fetch||Jt)(t,e)};function o(t,n){return w(t,c()(function(e){y().then(function(){return n.apply(this,e)}).catch(function(t){e.pop()(t)})})).bind(e)}function m(t,e,n){var r={};return(e=e||{}).headers=e.headers||new Yt,e.headers.get("Content-Type")||e.headers.set("Content-Type","application/json"),e.headers.get("Accept")||e.headers.set("Accept","application/json"),a(t,e).then(function(t){return r.ok=t.ok,r.status=t.status,t.json()}).then(function(t){if(r.data=t,!r.ok){r.data.status=r.status;t=Y(r.data);if(n)return n(t);throw t}if(Array.isArray(r.data)&&(r.data=r.data.map(function(t){return t.error||t.missing?Y(t):t})),!n)return r;n(null,r.data)})}function y(){return s.skip_setup?Promise.resolve():r||((r=m(n).catch(function(t){return t&&t.status&&404===t.status?(A(404,"PouchDB is just detecting if the remote exists."),m(n,{method:"PUT"})):Promise.reject(t)}).catch(function(t){return!(!t||!t.status||412!==t.status)||Promise.reject(t)})).catch(function(){r=null}),r)}function u(t){return t.split("/").map(encodeURIComponent).join("/")}q()(function(){t(null,e)}),e._remote=!0,e.type=function(){return"http"},e.id=o("id",function(e){a(an(v,"")).then(function(t){return t.json()}).catch(function(){return{}}).then(function(t){t=t&&t.uuid?t.uuid+v.db:on(v,"");e(null,t)})}),e.compact=o("compact",function(r,o){"function"==typeof r&&(o=r,r={}),r=M(r),m(on(v,"_compact"),{method:"POST"}).then(function(){!function n(){e.info(function(t,e){e&&!e.compact_running?o(null,{ok:!0}):setTimeout(n,r.interval||200)})}()})}),e.bulkGet=w("bulkGet",function(n,a){var s=this;function t(e){var t={};n.revs&&(t.revs=!0),n.attachments&&(t.attachments=!0),n.latest&&(t.latest=!0),m(on(v,"_bulk_get"+sn(t)),{method:"POST",body:JSON.stringify({docs:n.docs})}).then(function(t){n.attachments&&n.binary&&t.data.results.forEach(function(t){t.docs.forEach(en)}),e(null,t.data)}).catch(e)}function r(){for(var r=Math.ceil(n.docs.length/50),o=0,i=new Array(r),t=0;t<r;t++){var e=b(n,["revs","attachments","binary","latest"]);e.docs=n.docs.slice(50*t,Math.min(n.docs.length,50*(t+1))),k(s,e,function(n){return function(t,e){i[n]=e.results,++o===r&&a(null,{results:G(i)})}}(t))}}var o=an(v,""),e=tn[o];"boolean"!=typeof e?t(function(t,e){t?(tn[o]=!1,A(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),r()):(tn[o]=!0,a(null,e))}):e?t(a):r()}),e._info=function(e){y().then(function(){return a(on(v,""))}).then(function(t){return t.json()}).then(function(t){t.host=on(v,""),e(null,t)}).catch(e)},e.fetch=function(e,n){return y().then(function(){var t="/"===e.substring(0,1)?an(v,e.substring(1)):on(v,e);return a(t,n)})},e.get=o("get",function(e,i,n){"function"==typeof i&&(n=i,i={});var t={};function r(r){var f,o=r._attachments,t=o&&Object.keys(o);if(o&&t.length)return f=t.map(function(e){return function(){return n=o[t=e],t=nn(r._id)+"/"+u(t)+"?rev="+r._rev,a(on(v,t)).then(function(t){return"buffer"in t?t.buffer():t.blob()}).then(function(e){if(i.binary){var t=Object.getOwnPropertyDescriptor(e.__proto__,"type");return t&&!t.set||(e.type=n.content_type),e}return new Promise(function(t){pt(e,t)})}).then(function(t){delete n.stub,delete n.length,n.data=t});var n,t}}),new Promise(function(t,e){var n,r=0,o=0,i=0,a=f.length;function s(){++i===a?n?e(n):t():l()}function u(){r--,s()}function c(t){r--,n=n||t,s()}function l(){for(;r<5&&o<a;)r++,f[o++]().then(u,c)}l()})}(i=M(i)).revs&&(t.revs=!0),i.revs_info&&(t.revs_info=!0),i.latest&&(t.latest=!0),i.open_revs&&("all"!==i.open_revs&&(i.open_revs=JSON.stringify(i.open_revs)),t.open_revs=i.open_revs),i.rev&&(t.rev=i.rev),i.conflicts&&(t.conflicts=i.conflicts),i.update_seq&&(t.update_seq=i.update_seq),e=nn(e),m(on(v,e+sn(t))).then(function(e){return Promise.resolve().then(function(){if(i.attachments)return t=e.data,Array.isArray(t)?Promise.all(t.map(function(t){if(t.ok)return r(t.ok)})):r(t);var t}).then(function(){n(null,e.data)})}).catch(function(t){t.docId=e,n(t)})}),e.remove=o("remove",function(t,e,n,r){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(o=t,n="function"==typeof e?(r=e,{}):(r=n,e));n=o._rev||n.rev;m(on(v,nn(o._id))+"?rev="+n,{method:"DELETE"},r).catch(r)}),e.getAttachment=o("getAttachment",function(t,e,n,r){"function"==typeof n&&(r=n,n={});var o,n=n.rev?"?rev="+n.rev:"",n=on(v,nn(t))+"/"+u(e)+n;a(n,{method:"GET"}).then(function(t){if(o=t.headers.get("content-type"),t.ok)return void 0===i||i.browser||"function"!=typeof t.buffer?t.blob():t.buffer();throw t}).then(function(t){void 0===i||i.browser||(t.type=o),r(null,t)}).catch(function(t){r(t)})}),e.removeAttachment=o("removeAttachment",function(t,e,n,r){m(on(v,nn(t)+"/"+u(e))+"?rev="+n,{method:"DELETE"},r).catch(r)}),e.putAttachment=o("putAttachment",function(t,e,n,r,o,i){"function"==typeof o&&(i=o,o=r,r=n,n=null);var a,e=nn(t)+"/"+u(e),e=on(v,e);if(n&&(e+="?rev="+n),"string"==typeof r){try{a=st(r)}catch(t){return i(J(D,"Attachment is not a valid base64 string"))}r=a?lt(a,o):""}m(e,{headers:new Yt({"Content-Type":o}),method:"PUT",body:r},i).catch(i)}),e._bulkDocs=function(t,e,n){t.new_edits=e.new_edits,y().then(function(){return Promise.all(t.docs.map(rn))}).then(function(){return m(on(v,"_bulk_docs"),{method:"POST",body:JSON.stringify(t)},n)}).catch(n)},e._put=function(e,t,n){y().then(function(){return rn(e)}).then(function(){return m(on(v,nn(e._id)),{method:"PUT",body:JSON.stringify(e)})}).then(function(t){n(null,t.data)}).catch(function(t){t.docId=e&&e._id,n(t)})},e.allDocs=o("allDocs",function(e,n){"function"==typeof e&&(n=e,e={});var t,r={},o="GET";(e=M(e)).conflicts&&(r.conflicts=!0),e.update_seq&&(r.update_seq=!0),e.descending&&(r.descending=!0),e.include_docs&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.key&&(r.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(r.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(r.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(r.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.skip&&(r.skip=e.skip);r=sn(r);void 0!==e.keys&&(o="POST",t={keys:e.keys}),m(on(v,"_all_docs"+r),{method:o,body:JSON.stringify(t)}).then(function(t){e.include_docs&&e.attachments&&e.binary&&t.data.rows.forEach(en),n(null,t.data)}).catch(n)}),e._changes=function(i){var a="batch_size"in i?i.batch_size:25;!(i=M(i)).continuous||"heartbeat"in i||(i.heartbeat=1e4);var t="timeout"in i?i.timeout:3e4;"timeout"in i&&i.timeout&&t-i.timeout<5e3&&(t=i.timeout+5e3),"heartbeat"in i&&i.heartbeat&&t-i.heartbeat<5e3&&(t=i.heartbeat+5e3);var o={};"timeout"in i&&i.timeout&&(o.timeout=i.timeout);var s=void 0!==i.limit&&i.limit,u=s;if(i.style&&(o.style=i.style),(i.include_docs||i.filter&&"function"==typeof i.filter)&&(o.include_docs=!0),i.attachments&&(o.attachments=!0),i.continuous&&(o.feed="longpoll"),i.seq_interval&&(o.seq_interval=i.seq_interval),i.conflicts&&(o.conflicts=!0),i.descending&&(o.descending=!0),i.update_seq&&(o.update_seq=!0),"heartbeat"in i&&i.heartbeat&&(o.heartbeat=i.heartbeat),i.filter&&"string"==typeof i.filter&&(o.filter=i.filter),i.view&&"string"==typeof i.view&&(o.filter="_view",o.view=i.view),i.query_params&&"object"==typeof i.query_params)for(var e in i.query_params)i.query_params.hasOwnProperty(e)&&(o[e]=i.query_params[e]);var c,l="GET";i.doc_ids?(o.filter="_doc_ids",l="POST",c={doc_ids:i.doc_ids}):i.selector&&(o.filter="_selector",l="POST",c={selector:i.selector});var f,d=new Ht,h=function(t,e){var n,r;i.aborted||(o.since=t,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),i.descending?s&&(o.limit=u):o.limit=!s||a<u?a:u,n=on(v,"_changes"+sn(o)),r={signal:d.signal,method:l,body:JSON.stringify(c)},f=t,i.aborted||y().then(function(){return m(n,r,e)}).catch(e))},p={results:[]},g=function(t,e){if(!i.aborted){var n=0;if(e&&e.results){n=e.results.length,p.last_seq=e.last_seq;var r=null,o=null;"number"==typeof e.pending&&(r=e.pending),"string"!=typeof p.last_seq&&"number"!=typeof p.last_seq||(o=p.last_seq),i.query_params,e.results=e.results.filter(function(t){u--;var e=V(i)(t);return e&&(i.include_docs&&i.attachments&&i.binary&&en(t),i.return_docs&&p.results.push(t),i.onChange(t,r,o)),e})}else if(t)return i.aborted=!0,void i.complete(t);e&&e.last_seq&&(f=e.last_seq);n=s&&u<=0||e&&n<a||i.descending;(!i.continuous||s&&u<=0)&&n?i.complete(null,p):q()(function(){h(f,g)})}};return h(i.since||0,g),{cancel:function(){i.aborted=!0,d.abort()}}},e.revsDiff=o("revsDiff",function(t,e,n){"function"==typeof e&&(n=e,e={}),m(on(v,"_revs_diff"),{method:"POST",body:JSON.stringify(t)},n).catch(n)}),e._close=function(t){t()},e._destroy=function(t,e){m(on(v,""),{method:"DELETE"}).then(function(t){e(null,t)}).catch(function(t){404===t.status?e(null,{ok:!0}):e(t)})}}function cn(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,cn)}catch(t){}}function ln(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,ln)}catch(t){}}function fn(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,fn)}catch(t){}}function dn(t,e){return e&&t.then(function(t){q()(function(){e(null,t)})},function(t){q()(function(){e(t)})}),t}function hn(n,r){return function(){var t=arguments,e=this;return n.add(function(){return r.apply(e,t)})}}function pn(t){var t=new _(t),e=new Array(t.size),n=-1;return t.forEach(function(t){e[++n]=t}),e}function gn(t){var n=new Array(t.size),r=-1;return t.forEach(function(t,e){n[++r]=e}),n}function vn(t){return new fn("builtin "+t+" function requires map values to be numbers or number arrays")}function mn(t){for(var e=0,n=0,r=t.length;n<r;n++){var o=t[n];if("number"!=typeof o){if(!Array.isArray(o))throw vn("_sum");for(var e="number"==typeof e?[e]:e,i=0,a=o.length;i<a;i++){var s=o[i];if("number"!=typeof s)throw vn("_sum");void 0===e[i]?e.push(s):e[i]+=s}}else"number"==typeof e?e+=o:e[0]+=o}return e}un.valid=function(){return!0},e()(cn,Error),e()(ln,Error),e()(fn,Error);var yn=E.bind(null,"log"),_n=Array.isArray,wn=JSON.parse;function bn(t,e){return it("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:mn,log:yn,isArray:_n,toJSON:wn})}function kn(){this.promise=new Promise(function(t){t()})}function En(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function An(r,o,i,a,e,s){var u,c=(t=a,En(i)+En(t)+"undefined");if(!e&&(u=r._cachedViews=r._cachedViews||{})[c])return u[c];var t=r.info().then(function(t){var n=t.db_name+"-mrview-"+(e?"temp":_t(c));return at(r,"_local/"+s,function(t){t.views=t.views||{};var e=o;-1===e.indexOf("/")&&(e=o+"/"+o);e=t.views[e]=t.views[e]||{};if(!e[n])return e[n]=!0,t}).then(function(){return r.registerDependentDatabase(n).then(function(t){t=t.db;t.auto_compaction=!0;var e={name:n,db:t,sourceDB:r,adapter:r.adapter,mapFun:i,reduceFun:a};return e.db.get("_local/lastSeq").catch(function(t){if(404!==t.status)throw t}).then(function(t){return e.seq=t?t.seq:0,u&&e.db.once("destroyed",function(){delete u[c]}),e})})})});return u&&(u[c]=t),t}kn.prototype.add=function(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()}),this.promise},kn.prototype.finish=function(){return this.promise};var Cn={},Pn=new kn;function On(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Sn(t,e){try{t.emit("error",e)}catch(t){E("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),E("error",e)}}var Bn,xn,jn,Tn,Ln,In={_sum:function(t,e){return mn(e)},_count:function(t,e){return e.length},_stats:function(t,e){return{sum:mn(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,r=t.length;n<r;n++){var o=t[n];e+=o*o}return e}(e)}}},Dn=(Bn="mrviews",xn=function(t,e){if("function"!=typeof t||2!==t.length)return bn(t.toString(),e);var n=t;return function(t){return n(t,e)}},jn=function(t){t=t.toString();return function(t){if(/^_sum/.test(t))return In._sum;if(/^_count/.test(t))return In._count;if(/^_stats/.test(t))return In._stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(t)||bn(t)},Tn=function(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new ln("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)},{query:function(t,e,n){var r=this;"function"==typeof e&&(n=e,e={}),e=e?((o=e).group_level=$n(o.group_level),o.limit=$n(o.limit),o.skip=$n(o.skip),o):{},"function"==typeof t&&(t={map:t});var o=Promise.resolve().then(function(){return function(n,t,r){if("function"==typeof n._query)return e=n,o=t,i=r,new Promise(function(n,r){e._query(o,i,function(t,e){return t?r(t):void n(e)})});var e,o,i;if(X(n))return function(t,e,n){var r,o,i,a=[],s="GET";if(Rn("reduce",n,a),Rn("include_docs",n,a),Rn("attachments",n,a),Rn("limit",n,a),Rn("descending",n,a),Rn("group",n,a),Rn("group_level",n,a),Rn("skip",n,a),Rn("stale",n,a),Rn("conflicts",n,a),Rn("startkey",n,a,!0),Rn("start_key",n,a,!0),Rn("endkey",n,a,!0),Rn("end_key",n,a,!0),Rn("inclusive_end",n,a),Rn("key",n,a,!0),Rn("update_seq",n,a),a=""===(a=a.join("&"))?"":"?"+a,void 0!==n.keys&&((u="keys="+encodeURIComponent(JSON.stringify(n.keys))).length+a.length+1<=2e3?a+=("?"===a[0]?"&":"?")+u:(s="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)),"string"!=typeof e)return r=r||{},Object.keys(e).forEach(function(t){Array.isArray(e[t])?r[t]=e[t]:r[t]=e[t].toString()}),t.fetch("_temp_view"+a,{headers:new Yt({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)}).then(function(t){return o=t.ok,i=t.status,t.json()}).then(function(t){if(!o)throw t.status=i,Y(t);return t}).then(Nn(n));var u=On(e);return t.fetch("_design/"+u[0]+"/_view/"+u[1]+a,{headers:new Yt({"Content-Type":"application/json"}),method:s,body:JSON.stringify(r)}).then(function(t){return o=t.ok,i=t.status,t.json()}).then(function(t){if(!o)throw t.status=i,Y(t);return t.rows.forEach(function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)}),t}).then(Nn(n))}(n,t,r);if("string"!=typeof t)return Un(r,t),Pn.add(function(){return An(n,"temp_view/temp_view",t.map,t.reduce,!0,Bn).then(function(t){return e=Fn(t).then(function(){return Hn(t,r)}),n=function(){return t.db.destroy()},e.then(function(t){return n().then(function(){return t})},function(t){return n().then(function(){throw t})});var e,n})}),Pn.finish();var a=t,s=On(a),u=s[0],c=s[1];return n.get("_design/"+u).then(function(t){var e=t.views&&t.views[c];if(!e)throw new ln("ddoc "+t._id+" has no view named "+c);return Tn(t,c),Un(r,e),An(n,a,e.map,e.reduce,!1,Bn).then(function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&q()(function(){Fn(t)}),Hn(t,r)):Fn(t).then(function(){return Hn(t,r)})})})}(r,t,e)});return dn(o,n),o},viewCleanup:(Ln=function(){var t,e,n=this;return"function"==typeof n._viewCleanup?(t=n,new Promise(function(n,r){t._viewCleanup(function(t,e){return t?r(t):void n(e)})})):X(n)?n.fetch("_view_cleanup",{headers:new Yt({"Content-Type":"application/json"}),method:"POST"}).then(function(t){return t.json()}):(e=n).get("_local/"+Bn).then(function(a){var s=new S;Object.keys(a.views).forEach(function(t){var e=On(t),n="_design/"+e[0],t=e[1],e=s.get(n);e||(e=new _,s.set(n,e)),e.add(t)});var t={keys:gn(s),include_docs:!0};return e.allDocs(t).then(function(t){var i={};t.rows.forEach(function(r){var o=r.key.substring(8);s.get(r.key).forEach(function(t){var e=o+"/"+t;a.views[e]||(e=t);var e=Object.keys(a.views[e]),n=r.doc&&r.doc.views&&r.doc.views[t];e.forEach(function(t){i[t]=i[t]||n})})});t=Object.keys(i).filter(function(t){return!i[t]}).map(function(t){return hn(zn(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return Promise.all(t).then(function(){return{ok:!0}})})},Kn({ok:!0}))},c()(function(t){var e=t.pop(),t=Ln.apply(this,t);return"function"==typeof e&&dn(t,e),t}))});function qn(t,e){var n=oe(t.key,e.key);return 0!==n?n:oe(t.value,e.value)}function Mn(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function Nn(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&t.rows.forEach(function(t){var n=t.doc&&t.doc._attachments;n&&Object.keys(n).forEach(function(t){var e=n[t];n[t].data=ft(e.data,e.content_type)})}),t}}function Rn(t,e,n,r){e=e[t];void 0!==e&&(r&&(e=encodeURIComponent(JSON.stringify(e))),n.push(t+"="+e))}function $n(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function Un(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&0<oe(e[n],e[r]))throw new cn("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new cn("{include_docs:true} is invalid for reduce");if(e.keys&&1<e.keys.length&&!e.group&&!e.group_level)throw new cn("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){t=function(t){if(t)return"number"!=typeof t?new cn('Invalid value for integer: "'+t+'"'):t<0?new cn('Invalid value for positive integer: "'+t+'"'):void 0}(e[t]);if(t)throw t})}function Kn(e){return function(t){if(404===t.status)return e;throw t}}function zn(t){t="string"==typeof t?t:t.name;return Cn[t]||(Cn[t]=new kn)}function Fn(e){return hn(zn(e),function(){return c=xn((a=e).mapFun,function(t,e){t={id:u._id,key:ie(t)};null!=e&&(t.value=ie(e)),s.push(t)}),l=a.seq||0,i=new kn,o().then(function(){return i.finish()}).then(function(){a.seq=l});function o(){return a.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:l,limit:50}).then(t)}function t(t){var e,r,n=t.results;if(n.length){t=function(t){for(var e=new S,n=0,r=t.length;n<r;n++){var o,i=t[n];"_"!==i.doc._id[0]&&(s=[],(u=i.doc)._deleted||function(e,t,n){try{t(n)}catch(t){Sn(e,t)}}(a.sourceDB,c,u),s.sort(qn),o=function(t){for(var e,n=new S,r=0,o=t.length;r<o;r++){var i=t[r],a=[i.key,i.id];0<r&&0===oe(i.key,e)&&a.push(r),n.set(ae(a),i),e=i.key}return n}(s),e.set(i.doc._id,[o,i.changes])),l=i.seq}return e}(n);if(i.add((e=t,r=l,function(){return i=e,n=r,(o=a).db.get("_local/lastSeq").catch(Kn({_id:"_local/lastSeq",seq:0})).then(function(e){var t=gn(i);return Promise.all(t.map(function(t){return n=o,r={_id:e="_local/doc_"+t,keys:[]},t=i.get(t),c=t[0],(1===(t=t[1]).length&&/^1-/.test(t[0].rev)?Promise.resolve(r):n.db.get(e).catch(Kn(r))).then(function(e){return(e.keys.length?n.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(t){return function(t,e){for(var n=[],r=new _,o=0,i=e.rows.length;o<i;o++){var a,s=e.rows[o].doc;s&&(n.push(s),r.add(s._id),s._deleted=!c.has(s._id),s._deleted||"value"in(a=c.get(s._id))&&(s.value=a.value))}var u=gn(c);return u.forEach(function(t){var e;r.has(t)||(e={_id:t},"value"in(t=c.get(t))&&(e.value=t.value),n.push(e))}),t.keys=pn(u.concat(t.keys)),n.push(t),n}(e,t)})});var n,e,r,c})).then(function(t){t=G(t);return e.seq=n,t.push(e),o.db.bulkDocs({docs:t})})});var o,i,n})),!(n.length<50))return o()}}var a,s,u,c,l,i})()}function Hn(t,e){return hn(zn(t),function(){return function(n,o){var i,t,a=n.reduceFun&&!1!==o.reduce,s=o.skip||0;function e(t){return t.include_docs=!0,n.db.allDocs(t).then(function(t){return i=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||n<e))return t.doc.value}e=function(t){for(var e,n,r,o,i,a=[],s=[],u=0;;){var c=t[u++];if("\0"!==c)switch(c){case"1":a.push(null);break;case"2":a.push("1"===t[u]),u++;break;case"3":var l=function(t,e){var n,r=e;if("1"===t[e])n=0,e++;else{var o="0"===t[e],i="",a=t.substring(++e,e+ne),a=parseInt(a,10)+ee;for(o&&(a=-a),e+=ne;;){var s=t[e];if("\0"===s)break;i+=s,e++}n=1===(i=i.split(".")).length?parseInt(i,10):parseFloat(i[0]+"."+i[1]),o&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:e-r}}(t,u);a.push(l.num),u+=l.length;break;case"4":for(var f="";;){var d=t[u];if("\0"===d)break;f+=d,u++}f=f.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),a.push(f);break;case"5":var h={element:[],index:a.length};a.push(h.element),s.push(h);break;case"6":h={element:{},index:a.length};a.push(h.element),s.push(h);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+c)}else{if(1===a.length)return a.pop();n=s,r=o=void 0,i=(e=a).pop(),n.length&&(i===(o=n[n.length-1]).element&&(n.pop(),o=n[n.length-1]),r=o.element,o=o.index,Array.isArray(r)?r.push(i):o===e.length-2?r[e.pop()]=i:e.push(i))}}}(t.doc._id);return{key:e[0],id:e[1],value:"value"in t.doc?t.doc.value:null}})})}function r(e){var r=a?function(t,e,n){0===n.group_level&&delete n.group_level;var r=n.group||n.group_level,o=jn(t.reduceFun),i=[],a=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;e.forEach(function(t){var e=i[i.length-1],n=r?t.key:null;if(r&&Array.isArray(n)&&(n=n.slice(0,a)),e&&0===oe(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);i.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(var s,u,c=0,l=i.length;c<l;c++){var f=i[c],d=function(e,t,n,r){try{return{output:t(n,r,!1)}}catch(t){return Sn(e,t),{error:t}}}(t.sourceDB,o,f.keys,f.values);if(d.error&&d.error instanceof fn)throw d.error;e.push({value:d.error?null:d.output,key:f.groupKey})}return{rows:(s=e,u=n.limit,n=n.skip||0,"number"==typeof u?s.slice(n,u+n):0<n?s.slice(n):s)}}(n,e,o):{total_rows:i,offset:s,rows:e};if(o.update_seq&&(r.update_seq=n.seq),o.include_docs){var t=pn(e.map(Mn));return n.sourceDB.allDocs({keys:t,include_docs:!0,conflicts:o.conflicts,attachments:o.attachments,binary:o.binary}).then(function(t){var n=new S;return t.rows.forEach(function(t){n.set(t.id,t.doc)}),e.forEach(function(t){var e=Mn(t),e=n.get(e);e&&(t.doc=e)}),r})}return r}if(void 0===o.keys||o.keys.length||(o.limit=0,delete o.keys),void 0!==o.keys){var u=o.keys.map(function(t){t={startkey:ae([t]),endkey:ae([t,{}])};return o.update_seq&&(t.update_seq=!0),e(t)});return Promise.all(u).then(G).then(r)}var c,l,u={descending:o.descending};return o.update_seq&&(u.update_seq=!0),"start_key"in o&&(t=o.start_key),"startkey"in o&&(t=o.startkey),"end_key"in o&&(l=o.end_key),"endkey"in o&&(l=o.endkey),void 0!==t&&(u.startkey=o.descending?ae([t,{}]):ae([t])),void 0!==l&&(c=!1!==o.inclusive_end,o.descending&&(c=!c),u.endkey=ae(c?[l,{}]:[l])),void 0!==o.key&&(c=ae([o.key]),l=ae([o.key,{}]),u.descending?(u.endkey=c,u.startkey=l):(u.startkey=c,u.endkey=l)),a||("number"==typeof o.limit&&(u.limit=o.limit),u.skip=s),e(u).then(r)}(t,e)})()}t={query:function(t,e,n){return Dn.query.call(this,t,e,n)},viewCleanup:function(t){return Dn.viewCleanup.call(this,t)}};function Jn(t){return/^1-/.test(t)}function Yn(e,n){var t=Object.keys(n._attachments);return Promise.all(t.map(function(t){return e.getAttachment(n._id,t,{rev:n._rev})}))}var Vn="pouchdb";function Gn(e,n,r,o,i){return e.get(n).catch(function(t){if(404===t.status)return"http"!==e.adapter&&"https"!==e.adapter||A(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:o,_id:n,history:[],replicator:Vn,version:1};throw t}).then(function(t){if(!i.cancelled&&t.last_seq!==r)return t.history=(t.history||[]).filter(function(t){return t.session_id!==o}),t.history.unshift({last_seq:r,session_id:o}),t.history=t.history.slice(0,5),t.version=1,t.replicator=Vn,t.session_id=o,t.last_seq=r,e.put(t).catch(function(t){if(409===t.status)return Gn(e,n,r,o,i);throw t})})}function Qn(t,e,n,r,o){this.src=t,this.target=e,this.id=n,this.returnValue=r,this.opts=o||{}}Qn.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})},Qn.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?Gn(this.target,this.id,t,e,this.returnValue):Promise.resolve(!0)},Qn.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return Gn(this.src,this.id,t,e,this.returnValue).catch(function(t){if(Zn(t))return!(n.opts.writeSourceCheckpoint=!1);throw t})}return Promise.resolve(!0)};var Xn={undefined:function(t,e){return 0===oe(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return((e=e).session_id!==t.session_id?function t(e,n){var r=e[0],o=e.slice(1),i=n[0],a=n.slice(1);return r&&0!==n.length?Wn(r.session_id,n)?{last_seq:r.last_seq,history:e}:Wn(i.session_id,o)?{last_seq:i.last_seq,history:a}:t(o,a):{last_seq:0,history:[]}}(e.history,t.history):{last_seq:e.last_seq,history:e.history}).last_seq}};function Wn(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Wn(t,r))}function Zn(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function tr(c,l,f,d,i){var n,h,r=[],o={seq:0,changes:[],docs:[]},a=!1,s=!1,u=!1,p=0,g=f.continuous||f.live||!1,e=f.batch_size||100,v=f.batches_limit||10,m=!1,y=f.doc_ids,_=f.selector,w=[],b=bt();i=i||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};function t(){return h?Promise.resolve():(t=c,e=l,o=(n=f).doc_ids?n.doc_ids.sort(oe):"",i=n.filter?n.filter.toString():"",u=s=a="",n.selector&&(u=JSON.stringify(n.selector)),n.filter&&n.query_params&&(a=JSON.stringify((r=n.query_params,Object.keys(r).sort(oe).reduce(function(t,e){return t[e]=r[e],t},{})))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),Promise.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+i+s+a+o+u;return new Promise(function(t){yt(e,t)})}).then(function(t){return"_local/"+t.replace(/\//g,".").replace(/\+/g,"_")}).then(function(t){var e=!1===f.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===f.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===f.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0};h=new Qn(c,l,t,d,e)}));var t,e,n,r,o,i,a,s,u}function E(){if(w=[],0!==n.docs.length){var e=n.docs,t={timeout:f.timeout};return l.bulkDocs({docs:e,new_edits:!1},t).then(function(t){if(d.cancelled)throw B(),new Error("cancelled");var r=Object.create(null);t.forEach(function(t){t.error&&(r[t.id]=t)});t=Object.keys(r).length;i.doc_write_failures+=t,i.docs_written+=e.length-t,e.forEach(function(t){var e=r[t._id];if(e){i.errors.push(e);var n=(e.name||"").toLowerCase();if("unauthorized"!==n&&"forbidden"!==n)throw e;d.emit("denied",M(e))}else w.push(t)})},function(t){throw i.doc_write_failures+=e.length,t})}}function A(){if(n.error)throw new Error("There was a problem getting docs.");i.last_seq=p=n.seq;var t=M(i);return w.length&&(t.docs=w,"number"==typeof n.pending&&(t.pending=n.pending,delete n.pending),d.emit("change",t)),a=!0,h.writeCheckpoint(n.seq,b).then(function(){if(a=!1,d.cancelled)throw B(),new Error("cancelled");n=void 0,L()}).catch(function(t){throw D(t),t})}function C(){return function(s,u,r,o){r=M(r);var i=[],c=!0;return Promise.resolve().then(function(){var t=Object.keys(r).filter(function(t){t=r[t].missing;return 1===t.length&&Jn(t[0])});if(0<t.length)return s.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(t){if(o.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){var e;t.deleted||!t.doc||!Jn(t.value.rev)||(e=t.doc)._attachments&&0<Object.keys(e._attachments).length||(e=t.doc)._conflicts&&0<e._conflicts.length||(t.doc._conflicts&&delete t.doc._conflicts,i.push(t.doc),delete r[t.id])})})}).then(function(){var t,n,e=(t=r,n=[],Object.keys(t).forEach(function(e){t[e].missing.forEach(function(t){n.push({id:e,rev:t})})}),{docs:n,revs:!0,latest:!0});if(e.docs.length)return s.bulkGet(e).then(function(t){if(o.cancelled)throw new Error("cancelled");return Promise.all(t.results.map(function(t){return Promise.all(t.docs.map(function(t){var n,r,o,i,a=t.ok;return t.error&&(c=!1),a&&a._attachments?(n=u,o=a,t=X(r=s)&&!X(n),i=Object.keys(o._attachments),(t?n.get(o._id).then(function(e){return Promise.all(i.map(function(t){return e._attachments&&e._attachments[t]&&e._attachments[t].digest===o._attachments[t].digest?n.getAttachment(e._id,t):r.getAttachment(o._id,t)}))}).catch(function(t){if(404!==t.status)throw t;return Yn(r,o)}):Yn(r,o)).then(function(t){var n=Object.keys(a._attachments);return t.forEach(function(t,e){e=a._attachments[n[e]];delete e.stub,delete e.length,e.data=t}),a})):a}))})).then(function(t){i=i.concat(G(t).filter(Boolean))})})}).then(function(){return{ok:c,docs:i}})}(c,l,n.diffs,d).then(function(t){n.error=!t.ok,t.docs.forEach(function(t){delete n.diffs[t._id],i.docs_read++,n.docs.push(t)})})}function P(){var e;d.cancelled||n||(0!==r.length?(n=r.shift(),e={},n.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(t){return t.rev}))}),l.revsDiff(e).then(function(t){if(d.cancelled)throw B(),new Error("cancelled");n.diffs=t}).then(C).then(E).then(A).then(P).catch(function(t){S("batch processing terminated with error",t)})):O(!0))}function O(t){0!==o.changes.length?(t||s||o.changes.length>=e)&&(r.push(o),o={seq:0,changes:[],docs:[]},"pending"!==d.state&&"stopped"!==d.state||(d.state="active",d.emit("active")),P()):0!==r.length||n||((g&&k.live||s)&&(d.state="pending",d.emit("paused")),s&&B())}function S(t,e){u||(e.message||(e.message=t),i.ok=!1,i.status="aborting",r=[],o={seq:0,changes:[],docs:[]},B(e))}function B(t){var e,n,r,o;u||d.cancelled&&(i.status="cancelled",a)||(i.status=i.status||"complete",i.end_time=(new Date).toISOString(),i.last_seq=p,u=!0,t?((t=J(t)).result=i,"unauthorized"===(e=(t.name||"").toLowerCase())||"forbidden"===e?(d.emit("error",t),d.removeAllListeners()):(r=d,t=t,!1===(n=f).retry?(r.emit("error",t),r.removeAllListeners()):("function"!=typeof n.back_off_function&&(n.back_off_function=N),r.emit("requestError",t),"active"!==r.state&&"pending"!==r.state||(r.emit("paused",t),r.state="stopped",o=function(){n.current_back_off=0},r.once("paused",function(){r.removeListener("active",o)}),r.once("active",o)),n.current_back_off=n.current_back_off||0,n.current_back_off=n.back_off_function(n.current_back_off),setTimeout(function(){tr(c,l,f,d)},n.current_back_off)))):(d.emit("complete",i),d.removeAllListeners()))}function x(t,e,n){if(d.cancelled)return B();"number"==typeof e&&(o.pending=e),V(f)(t)&&(o.seq=t.seq||n,o.changes.push(t),q()(function(){O(0===r.length&&k.live)}))}function j(t){if(m=!1,d.cancelled)return B();var e;0<t.results.length?(k.since=t.results[t.results.length-1].seq,L(),O(!0)):(e=function(){g?(k.live=!0,L()):s=!0,O(!0)},n||0!==t.results.length?e():(a=!0,h.writeCheckpoint(t.last_seq,b).then(function(){a=!1,i.last_seq=p=t.last_seq,e()}).catch(D)))}function T(t){if(m=!1,d.cancelled)return B();S("changes rejected",t)}function L(){var t;function e(){t.cancel()}function n(){d.removeListener("cancel",e)}!m&&!s&&r.length<v&&(m=!0,d._changes&&(d.removeListener("cancel",d._abortChanges),d._changes.cancel()),d.once("cancel",e),(t=c.changes(k).on("change",x)).then(n,n),t.then(j).catch(T),f.retry&&(d._changes=t,d._abortChanges=e))}function I(){t().then(function(){return d.cancelled?void B():h.getCheckpoint().then(function(t){k={since:p=t,limit:e,batch_size:e,style:"all_docs",doc_ids:y,selector:_,return_docs:!0},f.filter&&("string"!=typeof f.filter?k.include_docs=!0:k.filter=f.filter),"heartbeat"in f&&(k.heartbeat=f.heartbeat),"timeout"in f&&(k.timeout=f.timeout),f.query_params&&(k.query_params=f.query_params),f.view&&(k.view=f.view),L()})}).catch(function(t){S("getCheckpoint rejected with ",t)})}function D(t){a=!1,S("writeCheckpoint completed with error",t)}d.ready(c,l),d.cancelled?B():(d._addedListeners||(d.once("cancel",B),"function"==typeof f.complete&&(d.once("error",f.complete),d.once("complete",function(t){f.complete(null,t)})),d._addedListeners=!0),void 0===f.since?I():t().then(function(){return a=!0,h.writeCheckpoint(f.since,b)}).then(function(){a=!1,d.cancelled?B():(p=f.since,I())}).catch(D))}function er(){s.a.call(this),this.cancelled=!1,this.state="pending";var n=this,r=new Promise(function(t,e){n.once("complete",t),n.once("error",e)});n.then=function(t,e){return r.then(t,e)},n.catch=function(t){return r.catch(t)},n.catch(function(){})}function nr(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function rr(t,e,n,r){if("function"==typeof n&&(r=n,n={}),(n=void 0===n?{}:n).doc_ids&&!Array.isArray(n.doc_ids))throw J(U,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=M(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;r=new er;return tr(nr(t,n),nr(e,n),n,r),r}function or(t,e,n,r){return"function"==typeof n&&(r=n,n={}),(n=M(n=void 0===n?{}:n)).PouchConstructor=n.PouchConstructor||this,new ir(t=nr(t,n),e=nr(e,n),n,r)}function ir(t,e,n,r){var o=this;this.canceled=!1;var i=n.push?C({},n,n.push):n,a=n.pull?C({},n,n.pull):n;function s(t){o.emit("change",{direction:"pull",change:t})}function u(t){o.emit("change",{direction:"push",change:t})}function c(t){o.emit("denied",{direction:"push",doc:t})}function l(t){o.emit("denied",{direction:"pull",doc:t})}function f(){o.pushPaused=!0,o.pullPaused&&o.emit("paused")}function d(){o.pullPaused=!0,o.pushPaused&&o.emit("paused")}function h(){o.pushPaused=!1,o.pullPaused&&o.emit("active",{direction:"push"})}function p(){o.pullPaused=!1,o.pushPaused&&o.emit("active",{direction:"pull"})}this.push=rr(t,e,i),this.pull=rr(e,t,a),this.pushPaused=!0,this.pullPaused=!0;var g={};function v(n){return function(t,e){("change"!==t||e!==s&&e!==u)&&("denied"!==t||e!==l&&e!==c)&&("paused"!==t||e!==d&&e!==f)&&("active"!==t||e!==p&&e!==h)||(t in g||(g[t]={}),g[t][n]=!0,2===Object.keys(g[t]).length&&o.removeAllListeners(t))}}function m(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}n.live&&(this.push.on("complete",o.pull.cancel.bind(o.pull)),this.pull.on("complete",o.push.cancel.bind(o.push))),this.on("newListener",function(t){"change"===t?(m(o.pull,"change",s),m(o.push,"change",u)):"denied"===t?(m(o.pull,"denied",l),m(o.push,"denied",c)):"active"===t?(m(o.pull,"active",p),m(o.push,"active",h)):"paused"===t&&(m(o.pull,"paused",d),m(o.push,"paused",f))}),this.on("removeListener",function(t){"change"===t?(o.pull.removeListener("change",s),o.push.removeListener("change",u)):"denied"===t?(o.pull.removeListener("denied",l),o.push.removeListener("denied",c)):"active"===t?(o.pull.removeListener("active",p),o.push.removeListener("active",h)):"paused"===t&&(o.pull.removeListener("paused",d),o.push.removeListener("paused",f))}),this.pull.on("removeListener",v("pull")),this.push.on("removeListener",v("push"));var y=Promise.all([this.push,this.pull]).then(function(t){t={push:t[0],pull:t[1]};return o.emit("complete",t),r&&r(null,t),o.removeAllListeners(),t},function(t){if(o.cancel(),r?r(t):o.emit("error",t),o.removeAllListeners(),r)throw t});this.then=function(t,e){return y.then(t,e)},this.catch=function(t){return y.catch(t)}}Qn.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(t){return t.last_seq||0}).catch(function(t){if(404!==t.status)throw t;return 0}):e.target.get(e.id).then(function(n){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?n.last_seq||0:e.src.get(e.id).then(function(t){if(n.version!==t.version)return 0;var e=n.version?n.version.toString():"undefined";return e in Xn?Xn[e](n,t):0},function(t){if(404===t.status&&n.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(t){return Zn(t)?(e.opts.writeSourceCheckpoint=!1,n.last_seq):0});throw t})}).catch(function(t){if(404!==t.status)throw t;return 0})},e()(er,s.a),er.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},er.prototype.ready=function(t,e){var n=this;function r(){n.cancel()}n._readyCalled||(n._readyCalled=!0,t.once("destroyed",r),e.once("destroyed",r),n.once("complete",function(){t.removeListener("destroyed",r),e.removeListener("destroyed",r)}))},e()(ir,s.a),ir.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ft.plugin(function(t){t.adapter("idb",Ze,!0)}).plugin(function(t){t.adapter("http",un,!1),t.adapter("https",un,!1)}).plugin(t).plugin(function(t){t.replicate=rr,t.sync=or,Object.defineProperty(t.prototype,"replicate",{get:function(){var r=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(t,e,n){return r.constructor.replicate(t,r,e,n)},to:function(t,e,n){return r.constructor.replicate(r,t,e,n)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}}),ar.default=Ft}.call(this,sr(61))},1187:function(t,n,e){n.publicEncrypt=e(1188),n.privateDecrypt=e(1189),n.privateEncrypt=function(t,e){return n.publicEncrypt(t,e,!0)},n.publicDecrypt=function(t,e){return n.privateDecrypt(t,e,!0)}},1188:function(t,e,n){var i=n(377),u=n(191),c=n(174),l=n(730),f=n(731),d=n(69),a=n(732),h=n(528),Buffer=n(36).Buffer;t.exports=function(t,e,n){var r,o=t.padding||(n?1:4),s=i(t);if(4===o)r=function(t){var e=s.modulus.byteLength(),n=t.length,r=c("sha1").update(Buffer.alloc(0)).digest(),o=r.length,i=2*o;if(e-i-2<n)throw new Error("message too long");var a=Buffer.alloc(e-n-i-2),n=e-o-1,i=u(o),n=f(Buffer.concat([r,a,Buffer.alloc(1,1),t],n),l(i,n)),o=f(i,l(n,o));return new d(Buffer.concat([Buffer.alloc(1),o,n],e))}(e);else if(1===o)r=function(t,e,n){var r=e.length,t=t.modulus.byteLength();if(t-11<r)throw new Error("message too long");return r=n?Buffer.alloc(t-r-3,255):function(t){for(var e,n=Buffer.allocUnsafe(t),r=0,o=u(2*t),i=0;r<t;)i===o.length&&(o=u(2*t),i=0),(e=o[i++])&&(n[r++]=e);return n}(t-r-3),new d(Buffer.concat([Buffer.from([0,n?1:2]),r,Buffer.alloc(1),e],t))}(s,e,n);else{if(3!==o)throw new Error("unknown padding");if(0<=(r=new d(e)).cmp(s.modulus))throw new Error("data too long for modulus")}return(n?h:a)(r,s)}},1189:function(t,e,n){var i=n(377),u=n(730),c=n(731),a=n(69),l=n(528),f=n(174),d=n(732),Buffer=n(36).Buffer;t.exports=function(t,e,n){var r=t.padding||(n?1:4),s=i(t),o=s.modulus.byteLength();if(e.length>o||0<=new a(e).cmp(s.modulus))throw new Error("decryption error");t=n?d(new a(e),s):l(e,s),e=Buffer.alloc(o-t.length),t=Buffer.concat([e,t],o);if(4===r)return function(t){var e=s.modulus.byteLength(),n=f("sha1").update(Buffer.alloc(0)).digest(),r=n.length;if(0!==t[0])throw new Error("decryption error");var o=t.slice(1,r+1),t=t.slice(r+1),o=c(o,u(t,r)),i=c(t,u(o,e-r-1));if(function(t,e){t=Buffer.from(t),e=Buffer.from(e);var n=0,r=t.length;t.length!==e.length&&(n++,r=Math.min(t.length,e.length));for(var o=-1;++o<r;)n+=t[o]^e[o];return n}(n,i.slice(0,r)))throw new Error("decryption error");for(var a=r;0===i[a];)a++;if(1===i[a++])return i.slice(a);throw new Error("decryption error")}(t);if(1===r)return function(t,e){for(var n=t.slice(0,2),r=2,o=0;0!==t[r++];)if(r>=t.length){o++;break}var i=t.slice(2,r-1);if(("0002"!==n.toString("hex")&&!e||"0001"!==n.toString("hex")&&e)&&o++,i.length<8&&o++,o)throw new Error("decryption error");return t.slice(r)}(t,n);if(3===r)return t;throw new Error("unknown padding")}},1247:function(t,e,n){const u=n(1248),c=n(1249);var r=n(1267);const o=n(1268);function i(r,o,i,a,e){var t=[].slice.call(arguments,1),n=t.length,t="function"==typeof t[n-1];if(!t&&!u())throw new Error("Callback required as last argument");if(!t){if(n<1)throw new Error("Too few arguments provided");return 1===n?(i=o,o=a=void 0):2!==n||o.getContext||(a=i,i=o,o=void 0),new Promise(function(t,e){try{var n=c.create(i,a);t(r(n,o,a))}catch(t){e(t)}})}if(n<2)throw new Error("Too few arguments provided");2===n?(e=i,i=o,o=a=void 0):3===n&&(o.getContext&&void 0===e?(e=a,a=void 0):(e=a,a=i,i=o,o=void 0));try{var s=c.create(i,a);e(null,r(s,o,a))}catch(t){e(t)}}e.create=c.create,e.toCanvas=i.bind(null,r.render),e.toDataURL=i.bind(null,r.renderToDataURL),e.toString=i.bind(null,function(t,e,n){return o.render(t,n)})},1248:function(t,e){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},1249:function(t,e,n){const A=n(214),i=n(538),a=n(1250),s=n(1251),u=n(1252),c=n(1253),l=n(1254),C=n(740),P=n(1255),f=n(1258),d=n(1259),h=n(215),p=n(1260);function g(t,e,n){var r=t.size,o=d.getEncodedBits(e,n);let i,a;for(i=0;i<15;i++)a=1==(o>>i&1),i<6?t.set(i,8,a,!0):i<8?t.set(i+1,8,a,!0):t.set(r-15+i,8,a,!0),i<8?t.set(8,r-i-1,a,!0):i<9?t.set(8,15-i-1+1,a,!0):t.set(8,15-i-1,a,!0);t.set(r-8,8,1,!0)}function v(e,n,r,t){let o;if(Array.isArray(e))o=p.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let t=n;t||(i=p.rawSplit(e),t=f.getBestVersionForData(i,r)),o=p.fromString(e,t||40)}}var i=f.getBestVersionForData(o,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(n){if(n<i)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+i+".\n")}else n=i;e=function(e,t,n){const r=new a;n.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(r)});n=8*(A.getSymbolTotalCodewords(e)-C.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=n&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);var o=(n-r.getLengthInBits())/8;for(let t=0;t<o;t++)r.put(t%2?17:236,8);return function(t,e,n){const r=A.getSymbolTotalCodewords(e),o=C.getTotalCodewordsCount(e,n),i=r-o,a=C.getBlocksCount(e,n),s=r%a,u=a-s,c=Math.floor(r/a),l=Math.floor(i/a),f=l+1,d=c-l,h=new P(d);let p=0;const g=new Array(a),v=new Array(a);let m=0;const y=new Uint8Array(t.buffer);for(let t=0;t<a;t++){var _=t<u?l:f;g[t]=y.slice(p,p+_),v[t]=h.encode(g[t]),p+=_,m=Math.max(m,_)}const w=new Uint8Array(r);let b=0,k,E;for(k=0;k<m;k++)for(E=0;E<a;E++)k<g[E].length&&(w[b++]=g[E][k]);for(k=0;k<d;k++)for(E=0;E<a;E++)w[b++]=v[E][k];return w}(r,e,t)}(n,r,o),i=A.getSymbolSize(n),i=new s(i);return function(n,t){var r=n.size,e=c.getPositions(t);for(let t=0;t<e.length;t++){var o=e[t][0],i=e[t][1];for(let e=-1;e<=7;e++)if(!(o+e<=-1||r<=o+e))for(let t=-1;t<=7;t++)i+t<=-1||r<=i+t||(0<=e&&e<=6&&(0===t||6===t)||0<=t&&t<=6&&(0===e||6===e)||2<=e&&e<=4&&2<=t&&t<=4?n.set(o+e,i+t,!0,!0):n.set(o+e,i+t,!1,!0))}}(i,n),function(e){var n=e.size;for(let t=8;t<n-8;t++){var r=t%2==0;e.set(t,6,r,!0),e.set(6,t,r,!0)}}(i),function(n,t){var e=u.getPositions(t);for(let t=0;t<e.length;t++){var r=e[t][0],o=e[t][1];for(let e=-2;e<=2;e++)for(let t=-2;t<=2;t++)-2===e||2===e||-2===t||2===t||0===e&&0===t?n.set(r+e,o+t,!0,!0):n.set(r+e,o+t,!1,!0)}}(i,n),g(i,r,0),7<=n&&function(e,t){var n,r,o,i=e.size,a=f.getEncodedBits(t);for(let t=0;t<18;t++)n=Math.floor(t/3),r=t%3+i-8-3,o=1==(a>>t&1),e.set(n,r,o,!0),e.set(r,n,o,!0)}(i,n),function(r,o){var t=r.size;let e=-1,i=t-1,a=7,s=0;for(let n=t-1;0<n;n-=2)for(6===n&&n--;;){for(let e=0;e<2;e++)if(!r.isReserved(i,n-e)){let t=!1;s<o.length&&(t=1==(o[s]>>>a&1)),r.set(i,n-e,t),a--,-1===a&&(s++,a=7)}if(i+=e,i<0||t<=i){i-=e,e=-e;break}}}(i,e),isNaN(t)&&(t=l.getBestMask(i,g.bind(null,i,r))),l.applyMask(t,i),g(i,r,t),{modules:i,version:n,errorCorrectionLevel:r,maskPattern:t,segments:o}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n=i.M,r,o;return void 0!==e&&(n=i.from(e.errorCorrectionLevel,i.M),r=f.from(e.version),o=l.from(e.maskPattern),e.toSJISFunc&&A.setToSJISFunction(e.toSJISFunc)),v(t,r,n,o)}},1250:function(t,e){function n(){this.buffer=[],this.length=0}n.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(e,n){for(let t=0;t<n;t++)this.putBit(1==(e>>>n-t-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=n},1251:function(t,e){function n(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}n.prototype.set=function(t,e,n,r){e=t*this.size+e;this.data[e]=n,r&&(this.reservedBit[e]=!0)},n.prototype.get=function(t,e){return this.data[t*this.size+e]},n.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},n.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=n},1252:function(t,e,n){const o=n(214).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];var e=Math.floor(t/7)+2,t=o(t),n=145===t?26:2*Math.ceil((t-13)/(2*e-2));const r=[t-7];for(let t=1;t<e-1;t++)r[t]=r[t-1]-n;return r.push(6),r.reverse()},e.getPositions=function(t){const n=[];var r=e.getRowColCoords(t),o=r.length;for(let e=0;e<o;e++)for(let t=0;t<o;t++)0===e&&0===t||0===e&&t===o-1||e===o-1&&0===t||n.push([r[e],r[t]]);return n}},1253:function(t,e,n){const r=n(214).getSymbolSize;e.getPositions=function(t){t=r(t);return[[0,0],[t-7,0],[0,t-7]]}},1254:function(t,s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const c={N1:3,N2:3,N3:40,N4:10};s.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&0<=t&&t<=7},s.from=function(t){return s.isValid(t)?parseInt(t,10):void 0},s.getPenaltyN1=function(r){var t=r.size;let o=0,i=0,a=0,s=null,u=null;for(let n=0;n<t;n++){i=a=0,s=u=null;for(let e=0;e<t;e++){let t=r.get(n,e);t===s?i++:(5<=i&&(o+=c.N1+(i-5)),s=t,i=1),t=r.get(e,n),t===u?a++:(5<=a&&(o+=c.N1+(a-5)),u=t,a=1)}5<=i&&(o+=c.N1+(i-5)),5<=a&&(o+=c.N1+(a-5))}return o},s.getPenaltyN2=function(n){var r=n.size;let o=0;for(let e=0;e<r-1;e++)for(let t=0;t<r-1;t++){var i=n.get(e,t)+n.get(e,t+1)+n.get(e+1,t)+n.get(e+1,t+1);4!==i&&0!==i||o++}return o*c.N2},s.getPenaltyN3=function(n){var r=n.size;let o=0,i=0,a=0;for(let e=0;e<r;e++)for(let t=i=a=0;t<r;t++)i=i<<1&2047|n.get(e,t),10<=t&&(1488===i||93===i)&&o++,a=a<<1&2047|n.get(t,e),10<=t&&(1488===a||93===a)&&o++;return o*c.N3},s.getPenaltyN4=function(e){let n=0;var r=e.data.length;for(let t=0;t<r;t++)n+=e.data[t];return Math.abs(Math.ceil(100*n/r/5)-10)*c.N4},s.applyMask=function(n,r){var o=r.size;for(let e=0;e<o;e++)for(let t=0;t<o;t++)r.isReserved(t,e)||r.xor(t,e,function(t,e,n){switch(t){case s.Patterns.PATTERN000:return(e+n)%2==0;case s.Patterns.PATTERN001:return e%2==0;case s.Patterns.PATTERN010:return n%3==0;case s.Patterns.PATTERN011:return(e+n)%3==0;case s.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case s.Patterns.PATTERN101:return e*n%2+e*n%3==0;case s.Patterns.PATTERN110:return(e*n%2+e*n%3)%2==0;case s.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}(n,t,e))},s.getBestMask=function(e,n){var r=Object.keys(s.Patterns).length;let o=0,i=1/0;for(let t=0;t<r;t++){n(t),s.applyMask(t,e);var a=s.getPenaltyN1(e)+s.getPenaltyN2(e)+s.getPenaltyN3(e)+s.getPenaltyN4(e);s.applyMask(t,e),a<i&&(i=a,o=t)}return o}},1255:function(t,e,n){const o=n(1256);function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(t){this.degree=t,this.genPoly=o.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);var n=o.mod(e,this.genPoly),t=this.degree-n.length;if(0<t){const r=new Uint8Array(this.degree);return r.set(n,t),r}return n},t.exports=r},1256:function(t,r,e){const i=e(1257);r.mul=function(n,r){const o=new Uint8Array(n.length+r.length-1);for(let e=0;e<n.length;e++)for(let t=0;t<r.length;t++)o[e+t]^=i.mul(n[e],r[t]);return o},r.mod=function(t,e){let n=new Uint8Array(t);for(;0<=n.length-e.length;){var r=n[0];for(let t=0;t<e.length;t++)n[t]^=i.mul(e[t],r);let t=0;for(;t<n.length&&0===n[t];)t++;n=n.slice(t)}return n},r.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let t=0;t<e;t++)n=r.mul(n,new Uint8Array([1,i.exp(t)]));return n}},1257:function(t,e){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[r[t]+r[e]]}},1258:function(t,o,e){const i=e(214),a=e(740),r=e(538),s=e(215),u=e(741),n=i.getBCHDigit(7973);function c(t,e){return s.getCharCountIndicator(t,e)+4}o.from=function(t,e){return u.isValid(t)?parseInt(t,10):e},o.getCapacity=function(t,e,n){if(!u.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=s.BYTE);e=8*(i.getSymbolTotalCodewords(t)-a.getTotalCodewordsCount(t,e));if(n===s.MIXED)return e;var r=e-c(n,t);switch(n){case s.NUMERIC:return Math.floor(r/10*3);case s.ALPHANUMERIC:return Math.floor(r/11*2);case s.KANJI:return Math.floor(r/13);default:return s.BYTE,Math.floor(r/8)}},o.getBestVersionForData=function(t,e){let n;e=r.from(e,r.M);if(Array.isArray(t)){if(1<t.length)return function(e,n){for(let t=1;t<=40;t++)if(function(t,n){let r=0;return t.forEach(function(t){var e=c(t.mode,n);r+=e+t.getBitsLength()}),r}(e,t)<=o.getCapacity(t,n,s.MIXED))return t}(t,e);if(0===t.length)return 1;n=t[0]}else n=t;return function(e,n,r){for(let t=1;t<=40;t++)if(n<=o.getCapacity(t,r,e))return t}(n.mode,n.getLength(),e)},o.getEncodedBits=function(t){if(!u.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;0<=i.getBCHDigit(e)-n;)e^=7973<<i.getBCHDigit(e)-n;return t<<12|e}},1259:function(t,e,n){const r=n(214),o=r.getBCHDigit(1335);e.getEncodedBits=function(t,e){e=t.bit<<3|e;let n=e<<10;for(;0<=r.getBCHDigit(n)-o;)n^=1335<<r.getBCHDigit(n)-o;return 21522^(e<<10|n)}},1260:function(t,i,e){const f=e(215),o=e(1261),a=e(1262),s=e(1263),u=e(1265),c=e(742),l=e(214),d=e(1266);function h(t){return unescape(encodeURIComponent(t)).length}function p(t,e,n){const r=[];for(var o;null!==(o=t.exec(n));)r.push({data:o[0],index:o.index,mode:e,length:o[0].length});return r}function g(t){const e=p(c.NUMERIC,f.NUMERIC,t);var n=p(c.ALPHANUMERIC,f.ALPHANUMERIC,t);let r,o;o=l.isKanjiModeEnabled()?(r=p(c.BYTE,f.BYTE,t),p(c.KANJI,f.KANJI,t)):(r=p(c.BYTE_KANJI,f.BYTE,t),[]);const i=e.concat(n,r,o);return i.sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function v(t,e){switch(e){case f.NUMERIC:return o.getBitsLength(t);case f.ALPHANUMERIC:return a.getBitsLength(t);case f.KANJI:return u.getBitsLength(t);case f.BYTE:return s.getBitsLength(t)}}function n(t,e){let n;var r=f.getBestModeForData(t);if(n=f.from(e,r),n!==f.BYTE&&n.bit<r.bit)throw new Error('"'+t+'" cannot be encoded with mode '+f.toString(n)+".\n Suggested mode is: "+f.toString(r));switch(n!==f.KANJI||l.isKanjiModeEnabled()||(n=f.BYTE),n){case f.NUMERIC:return new o(t);case f.ALPHANUMERIC:return new a(t);case f.KANJI:return new u(t);case f.BYTE:return new s(t)}}i.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(n(e,null)):e.data&&t.push(n(e.data,e.mode)),t},[])},i.fromString=function(t,e){var n=function(t,n){const r={},o={start:{}};let i=["start"];for(let e=0;e<t.length;e++){var a=t[e];const l=[];for(let t=0;t<a.length;t++){var s=a[t],u=""+e+t;l.push(u),r[u]={node:s,lastCount:0},o[u]={};for(let t=0;t<i.length;t++){var c=i[t];r[c]&&r[c].node.mode===s.mode?(o[c][u]=v(r[c].lastCount+s.length,s.mode)-v(r[c].lastCount,s.mode),r[c].lastCount+=s.length):(r[c]&&(r[c].lastCount=s.length),o[c][u]=v(s.length,s.mode)+4+f.getCharCountIndicator(s.mode,n))}}i=l}for(let t=0;t<i.length;t++)o[i[t]].end=0;return{map:o,table:r}}(function(e){const n=[];for(let t=0;t<e.length;t++){var r=e[t];switch(r.mode){case f.NUMERIC:n.push([r,{data:r.data,mode:f.ALPHANUMERIC,length:r.length},{data:r.data,mode:f.BYTE,length:r.length}]);break;case f.ALPHANUMERIC:n.push([r,{data:r.data,mode:f.BYTE,length:r.length}]);break;case f.KANJI:n.push([r,{data:r.data,mode:f.BYTE,length:h(r.data)}]);break;case f.BYTE:n.push([{data:r.data,mode:f.BYTE,length:h(r.data)}])}}return n}(g(t,l.isKanjiModeEnabled())),e),r=d.find_path(n.map,"start","end");const o=[];for(let t=1;t<r.length-1;t++)o.push(n.table[r[t]].node);return i.fromArray(o.reduce(function(t,e){var n=0<=t.length-1?t[t.length-1]:null;return n&&n.mode===e.mode?t[t.length-1].data+=e.data:t.push(e),t},[]))},i.rawSplit=function(t){return i.fromArray(g(t,l.isKanjiModeEnabled()))}},1261:function(t,e,n){const r=n(215);function o(t){this.mode=r.NUMERIC,this.data=t.toString()}o.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);var o=this.data.length-e;0<o&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*o+1))},t.exports=o},1262:function(t,e,n){const r=n(215),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(t){this.mode=r.ALPHANUMERIC,this.data=t}i.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){var n=45*o.indexOf(this.data[e]);n+=o.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(o.indexOf(this.data[e]),6)},t.exports=i},1263:function(t,e,n){const r=n(1264),o=n(215);function i(t){this.mode=o.BYTE,this.data=new Uint8Array(r(t))}i.getBitsLength=function(t){return 8*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){for(let t=0,e=this.data.length;t<e;t++)n.put(this.data[t],8)},t.exports=i},1265:function(t,e,n){const r=n(215),o=n(214);function i(t){this.mode=r.KANJI,this.data=t}i.getBitsLength=function(t){return 13*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=o.toSJIS(this.data[n]);if(33088<=t&&t<=40956)t-=33088;else{if(!(57408<=t&&t<=60351))throw new Error("Invalid SJIS character: "+this.data[n]+"\nMake sure your charset is UTF-8");t-=49472}t=192*(t>>>8&255)+(255&t),e.put(t,13)}},t.exports=i},1267:function(t,i,e){const s=e(743);i.render=function(t,e,n){let r=n,o=e;void 0!==r||e&&e.getContext||(r=e,e=void 0),e||(o=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),r=s.getOptions(r);var i=s.getImageWidth(t.modules.size,r);const a=o.getContext("2d");n=a.createImageData(i,i);return s.qrToImageData(n.data,t,r),e=a,t=o,i=i,e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px",a.putImageData(n,0,0),o},i.renderToDataURL=function(t,e,n){let r=n;void 0!==r||e&&e.getContext||(r=e,e=void 0),r=r||{};const o=i.render(t,e,r);t=r.type||"image/png",e=r.rendererOpts||{};return o.toDataURL(t,e.quality)}},1268:function(t,e,n){const a=n(743);function s(t,e){const n=t.a/255;t=e+'="'+t.hex+'"';return n<1?t+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':t}function l(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}e.render=function(t,e,n){var r=a.getOptions(e),o=t.modules.size,i=t.modules.data,e=o+2*r.margin,t=r.color.light.a?"<path "+s(r.color.light,"fill")+' d="M0 0h'+e+"v"+e+'H0z"/>':"",o="<path "+s(r.color.dark,"stroke")+' d="'+function(e,n,r){let o="",i=0,a=!1,s=0;for(let t=0;t<e.length;t++){var u=Math.floor(t%n),c=Math.floor(t/n);u||a||(a=!0),e[t]?(s++,0<t&&0<u&&e[t-1]||(o+=a?l("M",u+r,.5+c+r):l("m",i,0),i=0,a=!1),u+1<n&&e[t+1]||(o+=l("h",s),s=0)):i++}return o}(i,o,r.margin)+'"/>',o='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+'viewBox="0 0 '+e+" "+e+'" shape-rendering="crispEdges">'+t+o+"</svg>\n";return"function"==typeof n&&n(null,o),o}},1290:function(t,e,n){var i=n(541);function o(t){return t<i.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}t.exports={encodingLength:o,encode:function(t,e,n){var r=o(e);return 1===r?t.writeUInt8(e,n):2===r?(t.writeUInt8(i.OP_PUSHDATA1,n),t.writeUInt8(e,n+1)):3===r?(t.writeUInt8(i.OP_PUSHDATA2,n),t.writeUInt16LE(e,n+1)):(t.writeUInt8(i.OP_PUSHDATA4,n),t.writeUInt32LE(e,n+1)),r},decode:function(t,e){var n,r,o=t.readUInt8(e);if(o<i.OP_PUSHDATA1)n=o,r=1;else if(o===i.OP_PUSHDATA1){if(e+2>t.length)return null;n=t.readUInt8(e+1),r=2}else if(o===i.OP_PUSHDATA2){if(e+3>t.length)return null;n=t.readUInt16LE(e+1),r=3}else{if(e+5>t.length)return null;if(o!==i.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=t.readUInt32LE(e+1),r=5}return{opcode:o,number:n,size:r}}}},1375:function(t,e,n){var r=n(1376),u=n(1377),c=n(1378),v=n(1379),m=n(798);function l(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}n=l.prototype;n.addData=function(t){t=new r(t);this.dataList.push(t),this.dataCache=null},n.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},n.getModuleCount=function(){return this.moduleCount},n.make=function(){if(this.typeNumber<1){for(var t=1,t=1;t<40;t++){for(var e=u.getRSBlocks(t,this.errorCorrectLevel),n=new c,r=0,o=0;o<e.length;o++)r+=e[o].dataCount;for(o=0;o<this.dataList.length;o++){var i=this.dataList[o];n.put(i.mode,4),n.put(i.getLength(),v.getLengthInBits(i.mode,t)),i.write(n)}if(n.getLengthInBits()<=8*r)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},n.makeImpl=function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},n.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},n.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=v.getLostPoint(this);(0==n||r<t)&&(t=r,e=n)}return e},n.createMovieClip=function(t,e,n){var r=t.createEmptyMovieClip(e,n);this.make();for(var o=0;o<this.modules.length;o++)for(var i=+o,a=0;a<this.modules[o].length;a++){var s=+a;this.modules[o][a]&&(r.beginFill(0,100),r.moveTo(s,i),r.lineTo(1+s,i),r.lineTo(1+s,1+i),r.lineTo(s,1+i),r.endFill())}return r},n.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},n.setupPositionAdjustPattern=function(){for(var t=v.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],o=t[n];if(null==this.modules[r][o])for(var i=-2;i<=2;i++)for(var a=-2;a<=2;a++)this.modules[r+i][o+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a}},n.setupTypeNumber=function(t){for(var e=v.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++)r=!t&&1==(e>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r},n.setupTypeInfo=function(t,e){for(var e=this.errorCorrectLevel<<3|e,n=v.getBCHTypeInfo(e),r=0;r<15;r++){var o=!t&&1==(n>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(r=0;r<15;r++)o=!t&&1==(n>>r&1),r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o;this.modules[this.moduleCount-8][8]=!t},n.mapData=function(t,e){for(var n=-1,r=this.moduleCount-1,o=7,i=0,a=this.moduleCount-1;0<a;a-=2)for(6==a&&a--;;){for(var s,u,c=0;c<2;c++)null==this.modules[r][a-c]&&(s=!1,i<t.length&&(s=1==(t[i]>>>o&1)),u=v.getMask(e,r,a-c),this.modules[r][a-c]=s=u?!s:s,-1==--o&&(i++,o=7));if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(t,e,n){for(var r=u.getRSBlocks(t,e),o=new c,i=0;i<n.length;i++){var a=n[i];o.put(a.mode,4),o.put(a.getLength(),v.getLengthInBits(a.mode,t)),a.write(o)}for(var s=0,i=0;i<r.length;i++)s+=r[i].dataCount;if(o.getLengthInBits()>8*s)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*s+")");for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(l.PAD0,8),o.getLengthInBits()>=8*s));)o.put(l.PAD1,8);return l.createBytes(o,r)},l.createBytes=function(t,e){for(var n=0,r=0,o=0,i=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var u=e[s].dataCount,c=e[s].totalCount-u,r=Math.max(r,u),o=Math.max(o,c);i[s]=new Array(u);for(var l=0;l<i[s].length;l++)i[s][l]=255&t.buffer[l+n];n+=u;var c=v.getErrorCorrectPolynomial(c),f=new m(i[s],c.getLength()-1).mod(c);for(a[s]=new Array(c.getLength()-1),l=0;l<a[s].length;l++){var d=l+f.getLength()-a[s].length;a[s][l]=0<=d?f.get(d):0}}for(var h=0,l=0;l<e.length;l++)h+=e[l].totalCount;for(var p=new Array(h),g=0,l=0;l<r;l++)for(s=0;s<e.length;s++)l<i[s].length&&(p[g++]=i[s][l]);for(l=0;l<o;l++)for(s=0;s<e.length;s++)l<a[s].length&&(p[g++]=a[s][l]);return p},t.exports=l},1376:function(t,e,n){var r=n(796);function o(t){this.mode=r.MODE_8BIT_BYTE,this.data=t}o.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},t.exports=o},1377:function(t,e,n){var r=n(797);function l(t,e){this.totalCount=t,this.dataCount=e}l.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],l.getRSBlocks=function(t,e){var n=l.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,o=new Array,i=0;i<r;i++)for(var a=n[3*i+0],s=n[3*i+1],u=n[3*i+2],c=0;c<a;c++)o.push(new l(s,u));return o},l.getRsBlockTable=function(t,e){switch(e){case r.L:return l.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return l.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return l.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return l.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},t.exports=l},1378:function(t,e){function n(){this.buffer=new Array,this.length=0}n.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=n},1379:function(t,e,n){var r=n(796),o=n(798),i=n(799),a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=a.getBCHDigit(e)-a.getBCHDigit(a.G15);)e^=a.G15<<a.getBCHDigit(e)-a.getBCHDigit(a.G15);return(t<<10|e)^a.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=a.getBCHDigit(e)-a.getBCHDigit(a.G18);)e^=a.G18<<a.getBCHDigit(e)-a.getBCHDigit(a.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return a.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case 0:return(e+n)%2==0;case 1:return e%2==0;case 2:return n%3==0;case 3:return(e+n)%3==0;case 4:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case 5:return e*n%2+e*n%3==0;case 6:return(e*n%2+e*n%3)%2==0;case 7:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new o([1],0),n=0;n<t;n++)e=e.multiply(new o([1,i.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var o=0;o<e;o++){for(var i=0,a=t.isDark(r,o),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var u=-1;u<=1;u++)o+u<0||e<=o+u||0==s&&0==u||a==t.isDark(r+s,o+u)&&i++;5<i&&(n+=3+i-5)}for(r=0;r<e-1;r++)for(o=0;o<e-1;o++){var c=0;t.isDark(r,o)&&c++,t.isDark(r+1,o)&&c++,t.isDark(r,o+1)&&c++,t.isDark(r+1,o+1)&&c++,0!=c&&4!=c||(n+=3)}for(r=0;r<e;r++)for(o=0;o<e-6;o++)t.isDark(r,o)&&!t.isDark(r,o+1)&&t.isDark(r,o+2)&&t.isDark(r,o+3)&&t.isDark(r,o+4)&&!t.isDark(r,o+5)&&t.isDark(r,o+6)&&(n+=40);for(o=0;o<e;o++)for(r=0;r<e-6;r++)t.isDark(r,o)&&!t.isDark(r+1,o)&&t.isDark(r+2,o)&&t.isDark(r+3,o)&&t.isDark(r+4,o)&&!t.isDark(r+5,o)&&t.isDark(r+6,o)&&(n+=40);for(var l=0,o=0;o<e;o++)for(r=0;r<e;r++)t.isDark(r,o)&&l++;return n+Math.abs(100*l/e/e-50)/5*10}};t.exports=a},214:function(t,e){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||40<t)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},215:function(t,n,e){const r=e(741),o=e(742);n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return 1<=e&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},n.getBestModeForData=function(t){return o.testNumeric(t)?n.NUMERIC:o.testAlphanumeric(t)?n.ALPHANUMERIC:o.testKanji(t)?n.KANJI:n.BYTE},n.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},n.isValid=function(t){return t&&t.bit&&t.ccBits},n.from=function(t,e){if(n.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return e}}},3:function(t,e,n){t.exports=n(1009)()},371:function(t,e,n){"use strict";!function(s){void 0===s||!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,i,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(t);case 2:return s.nextTick(function(){t.call(null,e)});case 3:return s.nextTick(function(){t.call(null,e,n)});case 4:return s.nextTick(function(){t.call(null,e,n,r)});default:for(o=new Array(a-1),i=0;i<o.length;)o[i++]=arguments[i];return s.nextTick(function(){t.apply(null,o)})}}}:t.exports=s}.call(this,n(61))},387:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},o=Object.keys(t),i=0;i<o.length;i++)n=o[i],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)n=o[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?h(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=n(0),y=(n(3),n(1375)),_=n(797);function w(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):(r<2048?e+=String.fromCharCode(192|r>>6):(r<55296||57344<=r?e+=String.fromCharCode(224|r>>12):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e+=String.fromCharCode(240|r>>18),e+=String.fromCharCode(128|r>>12&63)),e+=String.fromCharCode(128|r>>6&63)),e+=String.fromCharCode(128|63&r))}return e}n={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000",includeMargin:!1};function b(t,e){var i=1<arguments.length&&void 0!==e?e:0,a=[];return t.forEach(function(n,r){var o=null;n.forEach(function(t,e){return t||null===o?e===n.length-1?t?void(null===o?a.push("M".concat(e+i,",").concat(r+i," h1v1H").concat(e+i,"z")):a.push("M".concat(o+i,",").concat(r+i," h").concat(e+1-o,"v1H").concat(o+i,"z"))):void 0:void(t&&null===o&&(o=e)):(a.push("M".concat(o+i," ").concat(r+i,"h").concat(e-o,"v1H").concat(o+i,"z")),void(o=null))})}),a.join("")}function k(t,n){return t.slice().map(function(t,e){return e<n.y||e>=n.y+n.h?t:t.map(function(t,e){return(e<n.x||e>=n.x+n.w)&&t})})}function E(t,e){var n=t.imageSettings,r=t.size,o=t.includeMargin;if(null==n)return null;var i=e.length+2*(o?4:0),a=Math.floor(.1*r),t=i/r,o=(n.width||a)*t,i=(n.height||a)*t,r=null==n.x?e.length/2-o/2:n.x*t,a=null==n.y?e.length/2-i/2:n.y*t,e=null;return{x:r,y:a,h:i,w:o,excavation:e=n.excavate?{x:t=Math.floor(r),y:n=Math.floor(a),w:Math.ceil(o+r-t),h:Math.ceil(i+a-n)}:e}}var A=function(){try{(new Path2D).addPath(new Path2D)}catch(t){return!1}return!0}(),C=function(){function i(){var t,e;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(h(e=c(this,(t=d(i)).call.apply(t,[this].concat(r)))),"_canvas",void 0),v(h(e),"_image",void 0),v(h(e),"state",{imgLoaded:!1}),v(h(e),"handleImageLoad",function(){e.setState({imgLoaded:!0})}),e}return p(i,m.PureComponent),u(i,[{key:"componentDidMount",value:function(){this._image&&this._image.complete&&this.handleImageLoad(),this.update()}},{key:"componentWillReceiveProps",value:function(t){var e;(null===(e=this.props.imageSettings)||void 0===e?void 0:e.src)!==(null===(t=t.imageSettings)||void 0===t?void 0:t.src)&&this.setState({imgLoaded:!1})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var r,o,t=this.props,e=t.value,n=t.size,i=t.level,a=t.bgColor,s=t.fgColor,u=t.includeMargin,c=t.imageSettings,t=new y(-1,_[i]);t.addData(w(e)),t.make(),null!=this._canvas&&(i=this._canvas,!(r=i.getContext("2d"))||null!==(e=t.modules)&&(t=e.length+2*(o=u?4:0),u=E(this.props,e),null!=c&&null!=u&&null!=u.excavation&&(e=k(e,u.excavation)),c=window.devicePixelRatio||1,i.height=i.width=n*c,r.scale(c=n/t*c,c),r.fillStyle=a,r.fillRect(0,0,t,t),r.fillStyle=s,A?r.fill(new Path2D(b(e,o))):e.forEach(function(t,n){t.forEach(function(t,e){t&&r.fillRect(e+o,n+o,1,1)})}),this.state.imgLoaded&&this._image&&null!=u&&r.drawImage(this._image,u.x+o,u.y+o,u.w,u.h)))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.value,t.size),r=(t.level,t.bgColor,t.fgColor,t.style),o=(t.includeMargin,t.imageSettings),i=f(t,["value","size","level","bgColor","fgColor","style","includeMargin","imageSettings"]),a=s({height:n,width:n},r),t=null,r=o&&o.src;return null!=o&&null!=r&&(t=m.createElement("img",{src:r,style:{display:"none"},onLoad:this.handleImageLoad,ref:function(t){return e._image=t}})),m.createElement(m.Fragment,null,m.createElement("canvas",l({style:a,height:n,width:n,ref:function(t){return e._canvas=t}},i)),t)}}]),i}();v(C,"defaultProps",n);var P=function(){function t(){return a(this,t),c(this,d(t).apply(this,arguments))}return p(t,m.PureComponent),u(t,[{key:"render",value:function(){var t=this.props,e=t.value,n=t.size,r=t.level,o=t.bgColor,i=t.fgColor,a=t.includeMargin,s=t.imageSettings,u=f(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),c=new y(-1,_[r]);c.addData(w(e)),c.make();t=c.modules;if(null===t)return null;r=a?4:0,e=t.length+2*r,c=E(this.props,t),a=null;null!=s&&null!=c&&(null!=c.excavation&&(t=k(t,c.excavation)),a=m.createElement("image",{xlinkHref:s.src,height:c.h,width:c.w,x:c.x+r,y:c.y+r,preserveAspectRatio:"none"}));r=b(t,r);return m.createElement("svg",l({shapeRendering:"crispEdges",height:n,width:n,viewBox:"0 0 ".concat(e," ").concat(e)},u),m.createElement("path",{fill:o,d:"M0,0 h".concat(e,"v").concat(e,"H0z")}),m.createElement("path",{fill:i,d:r}),a)}}]),t}();function O(t){var e=t.renderAs,t=f(t,["renderAs"]);return m.createElement("svg"===e?P:C,t)}v(P,"defaultProps",n),O.defaultProps=s({renderAs:"canvas"},n),t.exports=O},538:function(t,n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(t){return t&&void 0!==t.bit&&0<=t.bit&&t.bit<4},n.from=function(t,e){if(n.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return e}}},61:function(t,e){var n,r,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var s,u=[],c=!1,l=-1;function f(){c&&s&&(c=!1,s.length?u=s.concat(u):l=-1,u.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=u.length;e;){for(s=u,u=[];++l<e;)s&&s[l].run();l=-1,e=u.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||c||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},730:function(t,e,n){var a=n(174),Buffer=n(36).Buffer;t.exports=function(t,e){for(var n,r,o=Buffer.alloc(0),i=0;o.length<e;)n=i++,r=void 0,(r=Buffer.allocUnsafe(4)).writeUInt32BE(n,0),r=r,o=Buffer.concat([o,a("sha1").update(t).update(r).digest()]);return o.slice(0,e)}},731:function(t,e){t.exports=function(t,e){for(var n=t.length,r=-1;++r<n;)t[r]^=e[r];return t}},732:function(t,e,n){var r=n(69),Buffer=n(36).Buffer;t.exports=function(t,e){return Buffer.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},740:function(t,e,n){const r=n(538),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return i[4*(t-1)+0];case r.M:return i[4*(t-1)+1];case r.Q:return i[4*(t-1)+2];case r.H:return i[4*(t-1)+3];default:return}}},741:function(t,e){e.isValid=function(t){return!isNaN(t)&&1<=t&&t<=40}},742:function(t,e){var n,r="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+".replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";e.KANJI=new RegExp(n,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp("[0-9]+","g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+n+"$"),i=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return o.test(t)},e.testNumeric=function(t){return i.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},743:function(t,p){function o(t){if("string"!=typeof(t="number"==typeof t?t.toString():t))throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||8<e.length)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t,hex:"#"+e.slice(0,6).join("")}}p.getOptions=function(t){(t=t||{}).color||(t.color={});var e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&21<=t.width?t.width:void 0,r=t.scale||4;return{width:n,scale:n?4:r,margin:e,color:{dark:o(t.color.dark||"#000000ff"),light:o(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},p.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},p.getImageWidth=function(t,e){var n=p.getScale(t,e);return Math.floor((t+2*e.margin)*n)},p.qrToImageData=function(r,t,o){var i=t.modules.size,a=t.modules.data,s=p.getScale(i,o),u=Math.floor((i+2*o.margin)*s),c=o.margin*s,l=[o.color.light,o.color.dark];for(let n=0;n<u;n++)for(let e=0;e<u;e++){var f,d,h=4*(n*u+e);let t=o.color.light;n>=c&&e>=c&&n<u-c&&e<u-c&&(f=Math.floor((n-c)/s),d=Math.floor((e-c)/s),t=l[a[f*i+d]?1:0]),r[h++]=t.r,r[h++]=t.g,r[h++]=t.b,r[h]=t.a}}},796:function(t,e){t.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},797:function(t,e){t.exports={L:1,M:0,Q:3,H:2}},798:function(t,e,n){var o=n(799);function i(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}i.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=o.gexp(o.glog(this.get(n))+o.glog(t.get(r)));return new i(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=o.glog(this.get(0))-o.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<t.getLength();r++)n[r]^=o.gexp(o.glog(t.get(r))+e);return new i(n,0).mod(t)}},t.exports=i},799:function(t,e){for(var n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)n.EXP_TABLE[r]=1<<r;for(r=8;r<256;r++)n.EXP_TABLE[r]=n.EXP_TABLE[r-4]^n.EXP_TABLE[r-5]^n.EXP_TABLE[r-6]^n.EXP_TABLE[r-8];for(r=0;r<255;r++)n.LOG_TABLE[n.EXP_TABLE[r]]=r;t.exports=n}}]);